class I{withFields(W){let Z=Object.keys(this).map((Q)=>(Q in W)?W[Q]:this[Q]);return new this.constructor(...Z)}}class QW{static fromArray(W,Z){let Q=Z||new N;for(let J=W.length-1;J>=0;--J)Q=new AW(W[J],Q);return Q}[Symbol.iterator](){return new HJ(this)}toArray(){return[...this]}atLeastLength(W){let Z=this;while(W-- >0&&Z)Z=Z.tail;return Z!==void 0}hasLength(W){let Z=this;while(W-- >0&&Z)Z=Z.tail;return W===-1&&Z instanceof N}countLength(){let W=this,Z=0;while(W)W=W.tail,Z++;return Z-1}}function F(W,Z){return new AW(W,Z)}function M(W,Z){return QW.fromArray(W,Z)}class HJ{#W;constructor(W){this.#W=W}next(){if(this.#W instanceof N)return{done:!0};else{let{head:W,tail:Z}=this.#W;return this.#W=Z,{value:W,done:!1}}}}class N extends QW{}class AW extends QW{constructor(W,Z){super();this.head=W,this.tail=Z}}class pZ{bitSize;byteSize;bitOffset;rawBuffer;constructor(W,Z,Q){if(!(W instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Z??W.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=Q??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(W.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=W}byteAt(W){if(W<0||W>=this.byteSize)return;return cZ(this.rawBuffer,this.bitOffset,W)}equals(W){if(this.bitSize!==W.bitSize)return!1;let Z=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&W.bitOffset===0){for(let J=0;J<Z;J++)if(this.rawBuffer[J]!==W.rawBuffer[J])return!1;let Q=this.bitSize%8;if(Q){let J=8-Q;if(this.rawBuffer[Z]>>J!==W.rawBuffer[Z]>>J)return!1}}else{for(let J=0;J<Z;J++){let K=cZ(this.rawBuffer,this.bitOffset,J),G=cZ(W.rawBuffer,W.bitOffset,J);if(K!==G)return!1}let Q=this.bitSize%8;if(Q){let J=cZ(this.rawBuffer,this.bitOffset,Z),K=cZ(W.rawBuffer,W.bitOffset,Z),G=8-Q;if(J>>G!==K>>G)return!1}}return!0}get buffer(){if(YJ("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(YJ("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function cZ(W,Z,Q){if(Z===0)return W[Q]??0;else{let J=W[Q]<<Z&255,K=W[Q+1]>>8-Z;return J|K}}class vQ{constructor(W){this.value=W}}var VJ={};function YJ(W,Z){if(VJ[W])return;console.warn(`Deprecated BitArray.${W} property used in JavaScript FFI code. ${Z}.`),VJ[W]=!0}class TZ extends I{static isResult(W){return W instanceof TZ}}class A extends TZ{constructor(W){super();this[0]=W}isOk(){return!0}}class B extends TZ{constructor(W){super();this[0]=W}isOk(){return!1}}function o(W,Z){let Q=[W,Z];while(Q.length){let J=Q.pop(),K=Q.pop();if(J===K)continue;if(!MJ(J)||!MJ(K))return!1;if(!F9(J,K)||X9(J,K)||V9(J,K)||Y9(J,K)||M9(J,K)||H9(J,K)||U9(J,K))return!1;let X=Object.getPrototypeOf(J);if(X!==null&&typeof X.equals==="function")try{if(J.equals(K))continue;else return!1}catch{}let[V,Y]=G9(J),H=V(J),U=V(K);if(H.length!==U.length)return!1;for(let q of H)Q.push(Y(J,q),Y(K,q))}return!0}function G9(W){if(W instanceof Map)return[(Z)=>Z.keys(),(Z,Q)=>Z.get(Q)];else{let Z=W instanceof globalThis.Error?["message"]:[];return[(Q)=>[...Z,...Object.keys(Q)],(Q,J)=>Q[J]]}}function X9(W,Z){return W instanceof Date&&(W>Z||W<Z)}function V9(W,Z){return!(W instanceof pZ)&&W.buffer instanceof ArrayBuffer&&W.BYTES_PER_ELEMENT&&!(W.byteLength===Z.byteLength&&W.every((Q,J)=>Q===Z[J]))}function Y9(W,Z){return Array.isArray(W)&&W.length!==Z.length}function M9(W,Z){return W instanceof Map&&W.size!==Z.size}function H9(W,Z){return W instanceof Set&&(W.size!=Z.size||[...W].some((Q)=>!Z.has(Q)))}function U9(W,Z){return W instanceof RegExp&&(W.source!==Z.source||W.flags!==Z.flags)}function MJ(W){return typeof W==="object"&&W!==null}function F9(W,Z){if(typeof W!=="object"&&typeof Z!=="object"&&(!W||!Z))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>W instanceof J))return!1;return W.constructor===Z.constructor}function aW(W,Z,Q,J,K,G,X){let V=new globalThis.Error(G);V.gleam_error=W,V.file=Z,V.module=Q,V.line=J,V.function=K,V.fn=K;for(let Y in X)V[Y]=X[Y];return V}class t extends I{}class e extends I{}class oW extends I{}class JW extends I{constructor(W){super();this[0]=W}}class MW extends I{}function hQ(W,Z){if(W instanceof JW)return W[0];else return Z}var UJ=new WeakMap,_Q=new DataView(new ArrayBuffer(8)),uQ=0;function mQ(W){let Z=UJ.get(W);if(Z!==void 0)return Z;let Q=uQ++;if(uQ===2147483647)uQ=0;return UJ.set(W,Q),Q}function $Q(W,Z){return W^Z+2654435769+(W<<6)+(W>>2)|0}function pQ(W){let Z=0,Q=W.length;for(let J=0;J<Q;J++)Z=Math.imul(31,Z)+W.charCodeAt(J)|0;return Z}function RJ(W){_Q.setFloat64(0,W);let Z=_Q.getInt32(0),Q=_Q.getInt32(4);return Math.imul(73244475,Z>>16^Z)^Q}function R9(W){return pQ(W.toString())}function q9(W){let Z=Object.getPrototypeOf(W);if(Z!==null&&typeof Z.hashCode==="function")try{let J=W.hashCode(W);if(typeof J==="number")return J}catch{}if(W instanceof Promise||W instanceof WeakSet||W instanceof WeakMap)return mQ(W);if(W instanceof Date)return RJ(W.getTime());let Q=0;if(W instanceof ArrayBuffer)W=new Uint8Array(W);if(Array.isArray(W)||W instanceof Uint8Array)for(let J=0;J<W.length;J++)Q=Math.imul(31,Q)+OW(W[J])|0;else if(W instanceof Set)W.forEach((J)=>{Q=Q+OW(J)|0});else if(W instanceof Map)W.forEach((J,K)=>{Q=Q+$Q(OW(J),OW(K))|0});else{let J=Object.keys(W);for(let K=0;K<J.length;K++){let G=J[K],X=W[G];Q=Q+$Q(OW(X),pQ(G))|0}}return Q}function OW(W){if(W===null)return 1108378658;if(W===void 0)return 1108378659;if(W===!0)return 1108378657;if(W===!1)return 1108378656;switch(typeof W){case"number":return RJ(W);case"string":return pQ(W);case"bigint":return R9(W);case"object":return q9(W);case"symbol":return mQ(W);case"function":return mQ(W);default:return 0}}var yW=5,dQ=Math.pow(2,yW),I9=dQ-1,N9=dQ/2,z9=dQ/4,UW=0,kW=1,DW=2,VZ=3,sQ={type:DW,bitmap:0,array:[]};function dZ(W,Z){return W>>>Z&I9}function qQ(W,Z){return 1<<dZ(W,Z)}function D9(W){return W-=W>>1&1431655765,W=(W&858993459)+(W>>2&858993459),W=W+(W>>4)&252645135,W+=W>>8,W+=W>>16,W&127}function lQ(W,Z){return D9(W&Z-1)}function TW(W,Z,Q){let J=W.length,K=Array(J);for(let G=0;G<J;++G)K[G]=W[G];return K[Z]=Q,K}function S9(W,Z,Q){let J=W.length,K=Array(J+1),G=0,X=0;while(G<Z)K[X++]=W[G++];K[X++]=Q;while(G<J)K[X++]=W[G++];return K}function cQ(W,Z){let Q=W.length,J=Array(Q-1),K=0,G=0;while(K<Z)J[G++]=W[K++];++K;while(K<Q)J[G++]=W[K++];return J}function qJ(W,Z,Q,J,K,G){let X=OW(Z);if(X===J)return{type:VZ,hash:X,array:[{type:UW,k:Z,v:Q},{type:UW,k:K,v:G}]};let V={val:!1};return sZ(rQ(sQ,W,X,Z,Q,V),W,J,K,G,V)}function sZ(W,Z,Q,J,K,G){switch(W.type){case kW:return A9(W,Z,Q,J,K,G);case DW:return rQ(W,Z,Q,J,K,G);case VZ:return O9(W,Z,Q,J,K,G)}}function A9(W,Z,Q,J,K,G){let X=dZ(Q,Z),V=W.array[X];if(V===void 0)return G.val=!0,{type:kW,size:W.size+1,array:TW(W.array,X,{type:UW,k:J,v:K})};if(V.type===UW){if(o(J,V.k)){if(K===V.v)return W;return{type:kW,size:W.size,array:TW(W.array,X,{type:UW,k:J,v:K})}}return G.val=!0,{type:kW,size:W.size,array:TW(W.array,X,qJ(Z+yW,V.k,V.v,Q,J,K))}}let Y=sZ(V,Z+yW,Q,J,K,G);if(Y===V)return W;return{type:kW,size:W.size,array:TW(W.array,X,Y)}}function rQ(W,Z,Q,J,K,G){let X=qQ(Q,Z),V=lQ(W.bitmap,X);if((W.bitmap&X)!==0){let Y=W.array[V];if(Y.type!==UW){let U=sZ(Y,Z+yW,Q,J,K,G);if(U===Y)return W;return{type:DW,bitmap:W.bitmap,array:TW(W.array,V,U)}}let H=Y.k;if(o(J,H)){if(K===Y.v)return W;return{type:DW,bitmap:W.bitmap,array:TW(W.array,V,{type:UW,k:J,v:K})}}return G.val=!0,{type:DW,bitmap:W.bitmap,array:TW(W.array,V,qJ(Z+yW,H,Y.v,Q,J,K))}}else{let Y=W.array.length;if(Y>=N9){let H=Array(32),U=dZ(Q,Z);H[U]=rQ(sQ,Z+yW,Q,J,K,G);let q=0,D=W.bitmap;for(let T=0;T<32;T++){if((D&1)!==0){let S=W.array[q++];H[T]=S}D=D>>>1}return{type:kW,size:Y+1,array:H}}else{let H=S9(W.array,V,{type:UW,k:J,v:K});return G.val=!0,{type:DW,bitmap:W.bitmap|X,array:H}}}}function O9(W,Z,Q,J,K,G){if(Q===W.hash){let X=nQ(W,J);if(X!==-1){if(W.array[X].v===K)return W;return{type:VZ,hash:Q,array:TW(W.array,X,{type:UW,k:J,v:K})}}let V=W.array.length;return G.val=!0,{type:VZ,hash:Q,array:TW(W.array,V,{type:UW,k:J,v:K})}}return sZ({type:DW,bitmap:qQ(W.hash,Z),array:[W]},Z,Q,J,K,G)}function nQ(W,Z){let Q=W.array.length;for(let J=0;J<Q;J++)if(o(Z,W.array[J].k))return J;return-1}function RQ(W,Z,Q,J){switch(W.type){case kW:return T9(W,Z,Q,J);case DW:return B9(W,Z,Q,J);case VZ:return P9(W,J)}}function T9(W,Z,Q,J){let K=dZ(Q,Z),G=W.array[K];if(G===void 0)return;if(G.type!==UW)return RQ(G,Z+yW,Q,J);if(o(J,G.k))return G;return}function B9(W,Z,Q,J){let K=qQ(Q,Z);if((W.bitmap&K)===0)return;let G=lQ(W.bitmap,K),X=W.array[G];if(X.type!==UW)return RQ(X,Z+yW,Q,J);if(o(J,X.k))return X;return}function P9(W,Z){let Q=nQ(W,Z);if(Q<0)return;return W.array[Q]}function iQ(W,Z,Q,J){switch(W.type){case kW:return j9(W,Z,Q,J);case DW:return C9(W,Z,Q,J);case VZ:return L9(W,J)}}function j9(W,Z,Q,J){let K=dZ(Q,Z),G=W.array[K];if(G===void 0)return W;let X=void 0;if(G.type===UW){if(!o(G.k,J))return W}else if(X=iQ(G,Z+yW,Q,J),X===G)return W;if(X===void 0){if(W.size<=z9){let V=W.array,Y=Array(W.size-1),H=0,U=0,q=0;while(H<K){let D=V[H];if(D!==void 0)Y[U]=D,q|=1<<H,++U;++H}++H;while(H<V.length){let D=V[H];if(D!==void 0)Y[U]=D,q|=1<<H,++U;++H}return{type:DW,bitmap:q,array:Y}}return{type:kW,size:W.size-1,array:TW(W.array,K,X)}}return{type:kW,size:W.size,array:TW(W.array,K,X)}}function C9(W,Z,Q,J){let K=qQ(Q,Z);if((W.bitmap&K)===0)return W;let G=lQ(W.bitmap,K),X=W.array[G];if(X.type!==UW){let V=iQ(X,Z+yW,Q,J);if(V===X)return W;if(V!==void 0)return{type:DW,bitmap:W.bitmap,array:TW(W.array,G,V)};if(W.bitmap===K)return;return{type:DW,bitmap:W.bitmap^K,array:cQ(W.array,G)}}if(o(J,X.k)){if(W.bitmap===K)return;return{type:DW,bitmap:W.bitmap^K,array:cQ(W.array,G)}}return W}function L9(W,Z){let Q=nQ(W,Z);if(Q<0)return W;if(W.array.length===1)return;return{type:VZ,hash:W.hash,array:cQ(W.array,Q)}}function IJ(W,Z){if(W===void 0)return;let Q=W.array,J=Q.length;for(let K=0;K<J;K++){let G=Q[K];if(G===void 0)continue;if(G.type===UW){Z(G.v,G.k);continue}IJ(G,Z)}}class HW{static fromObject(W){let Z=Object.keys(W),Q=HW.new();for(let J=0;J<Z.length;J++){let K=Z[J];Q=Q.set(K,W[K])}return Q}static fromMap(W){let Z=HW.new();return W.forEach((Q,J)=>{Z=Z.set(J,Q)}),Z}static new(){return new HW(void 0,0)}constructor(W,Z){this.root=W,this.size=Z}get(W,Z){if(this.root===void 0)return Z;let Q=RQ(this.root,0,OW(W),W);if(Q===void 0)return Z;return Q.v}set(W,Z){let Q={val:!1},J=this.root===void 0?sQ:this.root,K=sZ(J,0,OW(W),W,Z,Q);if(K===this.root)return this;return new HW(K,Q.val?this.size+1:this.size)}delete(W){if(this.root===void 0)return this;let Z=iQ(this.root,0,OW(W),W);if(Z===this.root)return this;if(Z===void 0)return HW.new();return new HW(Z,this.size-1)}has(W){if(this.root===void 0)return!1;return RQ(this.root,0,OW(W),W)!==void 0}entries(){if(this.root===void 0)return[];let W=[];return this.forEach((Z,Q)=>W.push([Q,Z])),W}forEach(W){IJ(this.root,W)}hashCode(){let W=0;return this.forEach((Z,Q)=>{W=W+$Q(OW(Z),OW(Q))|0}),W}equals(W){if(!(W instanceof HW)||this.size!==W.size)return!1;try{return this.forEach((Z,Q)=>{if(!o(W.get(Q,!Z),Z))throw FJ}),!0}catch(Z){if(Z===FJ)return!1;throw Z}}}var FJ=Symbol();function lZ(W,Z,Q){return DJ(Z,Q,W)}function w9(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return J;else{let K=Q.head;W=Q.tail,Z=F(K,J)}}}function E9(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return w9(J,M([]));else{let K=Q.tail,G=Q.head[0];W=K,Z=F(G,J)}}}function rZ(W){return E9(zJ(W),M([]))}class KW extends I{}class PZ extends I{}function nZ(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return J;else{let K=Q.head;W=Q.tail,Z=F(K,J)}}}function p(W){return nZ(W,M([]))}function SJ(W){return o(W,M([]))}function AJ(W){if(W instanceof N)return new B(void 0);else{let Z=W.head;return new A(Z)}}function y9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return p(G);else{let{head:X,tail:V}=J,Y;if(K(X))Y=F(X,G);else Y=G;let U=Y;W=V,Z=K,Q=U}}}function OJ(W,Z){return y9(W,Z,M([]))}function b9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return p(G);else{let X=J.head;W=J.tail,Z=K,Q=F(K(X),G)}}}function BW(W,Z){return b9(W,Z,M([]))}function g9(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return J;else{let K=Q.head;W=Q.tail,Z=F(K,J)}}}function iZ(W,Z){return g9(p(W),Z)}function IQ(W,Z){return F(Z,W)}function qW(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return K;else{let X=J.head;W=J.tail,Z=G(K,X),Q=G}}}function f9(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return new B(void 0);else{let{head:K,tail:G}=Q,X=J(K);if(X instanceof A)return X;else W=G,Z=J}}}function v9(W,Z,Q,J,K,G){while(!0){let X=W,V=Z,Y=Q,H=J,U=K,q=G,D=F(U,Y);if(X instanceof N)if(H instanceof KW)return F(p(D),q);else return F(D,q);else{let{head:T,tail:S}=X,L=V(U,T);if(H instanceof KW)if(L instanceof t)W=S,Z=V,Q=D,J=H,K=T,G=q;else if(L instanceof e)W=S,Z=V,Q=D,J=H,K=T,G=q;else{let z;if(H instanceof KW)z=F(p(D),q);else z=F(D,q);let E=z;if(S instanceof N)return F(M([T]),E);else{let{head:O,tail:j}=S,x,R=V(T,O);if(R instanceof t)x=new KW;else if(R instanceof e)x=new KW;else x=new PZ;let P=x;W=j,Z=V,Q=M([T]),J=P,K=O,G=E}}else if(L instanceof t){let z;if(H instanceof KW)z=F(p(D),q);else z=F(D,q);let E=z;if(S instanceof N)return F(M([T]),E);else{let{head:O,tail:j}=S,x,R=V(T,O);if(R instanceof t)x=new KW;else if(R instanceof e)x=new KW;else x=new PZ;let P=x;W=j,Z=V,Q=M([T]),J=P,K=O,G=E}}else if(L instanceof e){let z;if(H instanceof KW)z=F(p(D),q);else z=F(D,q);let E=z;if(S instanceof N)return F(M([T]),E);else{let{head:O,tail:j}=S,x,R=V(T,O);if(R instanceof t)x=new KW;else if(R instanceof e)x=new KW;else x=new PZ;let P=x;W=j,Z=V,Q=M([T]),J=P,K=O,G=E}}else W=S,Z=V,Q=D,J=H,K=T,G=q}}}function h9(W,Z,Q,J){while(!0){let K=W,G=Z,X=Q,V=J;if(K instanceof N)return nZ(G,V);else if(G instanceof N)return nZ(K,V);else{let{head:Y,tail:H}=K,U=G.head,q=G.tail,D=X(Y,U);if(D instanceof t)W=H,Z=G,Q=X,J=F(Y,V);else if(D instanceof e)W=K,Z=q,Q=X,J=F(U,V);else W=K,Z=q,Q=X,J=F(U,V)}}}function _9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return p(G);else{let X=J.tail;if(X instanceof N){let V=J.head;return p(F(p(V),G))}else{let V=J.head,Y=X.head,H=X.tail,U=h9(V,Y,K,M([]));W=H,Z=K,Q=F(U,G)}}}}function u9(W,Z,Q,J){while(!0){let K=W,G=Z,X=Q,V=J;if(K instanceof N)return nZ(G,V);else if(G instanceof N)return nZ(K,V);else{let{head:Y,tail:H}=K,U=G.head,q=G.tail,D=X(Y,U);if(D instanceof t)W=K,Z=q,Q=X,J=F(U,V);else if(D instanceof e)W=H,Z=G,Q=X,J=F(Y,V);else W=H,Z=G,Q=X,J=F(Y,V)}}}function m9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return p(G);else{let X=J.tail;if(X instanceof N){let V=J.head;return p(F(p(V),G))}else{let V=J.head,Y=X.head,H=X.tail,U=u9(V,Y,K,M([]));W=H,Z=K,Q=F(U,G)}}}}function $9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return J;else if(K instanceof KW)if(J.tail instanceof N)return J.head;else W=_9(J,G,M([])),Z=new PZ,Q=G;else if(J.tail instanceof N){let V=J.head;return p(V)}else W=m9(J,G,M([])),Z=new KW,Q=G}}function TJ(W,Z){if(W instanceof N)return W;else{let Q=W.tail;if(Q instanceof N)return W;else{let J=W.head,K=Q.head,G=Q.tail,X,V=Z(J,K);if(V instanceof t)X=new KW;else if(V instanceof e)X=new KW;else X=new PZ;let Y=X,H=v9(G,Z,M([J]),Y,K,M([]));return $9(H,new KW,Z)}}}function BJ(W,Z){return f9(W,(Q)=>{let J,K;if(J=Q[0],K=Q[1],o(J,Z))return new A(K);else return new B(void 0)})}function PJ(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return;else{let{head:K,tail:G}=Q;J(K),W=G,Z=J}}}class $W extends I{constructor(W,Z,Q){super();this.expected=W,this.found=Z,this.path=Q}}class eW extends I{constructor(W){super();this.function=W}}function cW(W,Z){let Q=Z.function(W),J,K;if(J=Q[0],K=Q[1],K instanceof N)return new A(J);else return new B(K)}function YZ(W){return new eW((Z)=>{return[W,M([])]})}function aZ(W,Z){return new eW((Q)=>{let J=W.function(Q),K,G;return K=J[0],G=J[1],[Z(K),G]})}function d9(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(G instanceof N)return K;else{let{head:X,tail:V}=G,Y=X.function(J),H,U;if(H=Y,U=Y[1],U instanceof N)return H;else W=J,Z=K,Q=V}}}function EJ(W,Z){return new eW((Q)=>{let J=W.function(Q),K,G;if(K=J,G=J[1],G instanceof N)return K;else return d9(Q,K,Z)})}function xJ(W,Z,Q){let J=Q(W);if(J instanceof A)return[J[0],M([])];else return[J[0],M([new $W(Z,mW(W),M([]))])]}function s9(W){return xJ(W,"Int",fJ)}var kJ=new eW(s9);function l9(W){return xJ(W,"String",vJ)}var VW=new eW(l9);function oZ(W){return new eW((Z)=>{return gJ(Z,W.function,(Q,J)=>{return NQ(Q,M([J]))},0,M([]))})}function NQ(W,Z){let Q=EJ(VW,M([(()=>{return aZ(kJ,pW)})()])),J=BW(Z,(G)=>{let X=l(G),V=cW(X,Q);if(V instanceof A)return V[0];else return"<"+mW(X)+">"}),K=BW(W[1],(G)=>{return new $W(G.expected,G.found,iZ(J,G.path))});return[W[0],K]}function r9(W,Z,Q,J,K){while(!0){let G=W,X=Z,V=Q,Y=J,H=K;if(G instanceof N){let q=V(Y);return NQ(q,p(X))}else{let{head:U,tail:q}=G,D=bJ(Y,U);if(D instanceof A){let T=D[0];if(T instanceof JW){let S=T[0];W=q,Z=F(U,X),Q=V,J=S,K=H}else return H(Y,F(U,X))}else{let T=D[0],S=V(Y),L;L=S[0];let z=[L,M([new $W(T,mW(Y),M([]))])];return NQ(z,p(X))}}}}function yJ(W,Z,Q){return new eW((J)=>{let K=r9(W,M([]),Z.function,J,(U,q)=>{let D=Z.function(U),T;T=D[0];let S=[T,M([new $W("Field","Nothing",M([]))])];return NQ(S,p(q))}),G,X;G=K[0],X=K[1];let V=Q(G).function(J),Y,H;return Y=V[0],H=V[1],[Y,iZ(X,H)]})}function WW(W,Z,Q){return yJ(M([W]),Z,Q)}var mJ=void 0,_J={};function l(W){return W}function pW(W){return W.toString()}function aQ(W){let Z=$J(W);if(Z)return QW.fromArray(Array.from(Z).map((Q)=>Q.segment));else return QW.fromArray(W.match(/./gsu))}var uJ=void 0;function $J(W){if(globalThis.Intl&&Intl.Segmenter)return uJ||=new Intl.Segmenter,uJ.segment(W)[Symbol.iterator]()}function cJ(W){let Z,Q=$J(W);if(Q)Z=Q.next().value?.segment;else Z=W.match(/./su)?.[0];if(Z)return new A([Z,W.slice(Z.length)]);else return new B(mJ)}function oQ(W){return W.toLowerCase()}function tQ(W){return W.toUpperCase()}function eQ(W,Z){return QW.fromArray(W.split(Z))}function CZ(W,Z){return W.indexOf(Z)>=0}function W6(W,Z){return W.startsWith(Z)}var pJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),SX=new RegExp(`^[${pJ}]*`),AX=new RegExp(`[${pJ}]*$`);function BZ(){return HW.new()}function zJ(W){return QW.fromArray(W.entries())}function tW(W,Z){let Q=W.get(Z,_J);if(Q===_J)return new B(mJ);return new A(Q)}function DJ(W,Z,Q){return Q.set(W,Z)}function mW(W){if(typeof W==="string")return"String";else if(typeof W==="boolean")return"Bool";else if(W instanceof TZ)return"Result";else if(W instanceof QW)return"List";else if(W instanceof pZ)return"BitArray";else if(W instanceof HW)return"Dict";else if(Number.isInteger(W))return"Int";else if(Array.isArray(W))return"Array";else if(typeof W==="number")return"Float";else if(W===null)return"Nil";else if(W===void 0)return"Nil";else{let Z=typeof W;return Z.charAt(0).toUpperCase()+Z.slice(1)}}function dJ(W){let Z=W.toString().replace("+","");if(Z.indexOf(".")>=0)return Z;else{let Q=Z.indexOf("e");if(Q>=0)return Z.slice(0,Q)+".0"+Z.slice(Q);else return Z+".0"}}class i9{#W=new Set;inspect(W){let Z=typeof W;if(W===!0)return"True";if(W===!1)return"False";if(W===null)return"//js(null)";if(W===void 0)return"Nil";if(Z==="string")return this.#G(W);if(Z==="bigint"||Number.isInteger(W))return W.toString();if(Z==="number")return dJ(W);if(W instanceof vQ)return this.#V(W);if(W instanceof pZ)return this.#Y(W);if(W instanceof RegExp)return`//js(${W})`;if(W instanceof Date)return`//js(Date("${W.toISOString()}"))`;if(W instanceof globalThis.Error)return`//js(${W.toString()})`;if(W instanceof Function){let J=[];for(let K of Array(W.length).keys())J.push(String.fromCharCode(K+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#W.size===this.#W.add(W).size)return"//js(circular reference)";let Q;if(Array.isArray(W))Q=`#(${W.map((J)=>this.inspect(J)).join(", ")})`;else if(W instanceof QW)Q=this.#Z(W);else if(W instanceof I)Q=this.#Q(W);else if(W instanceof HW)Q=this.#J(W);else if(W instanceof Set)return`//js(Set(${[...W].map((J)=>this.inspect(J)).join(", ")}))`;else Q=this.#K(W);return this.#W.delete(W),Q}#K(W){let Z=Object.getPrototypeOf(W)?.constructor?.name||"Object",Q=[];for(let G of Object.keys(W))Q.push(`${this.inspect(G)}: ${this.inspect(W[G])}`);let J=Q.length?" "+Q.join(", ")+" ":"";return`//js(${Z==="Object"?"":Z+" "}{${J}})`}#J(W){let Z="dict.from_list([",Q=!0;return W.forEach((J,K)=>{if(!Q)Z=Z+", ";Z=Z+"#("+this.inspect(K)+", "+this.inspect(J)+")",Q=!1}),Z+"])"}#Q(W){let Z=Object.keys(W).map((Q)=>{let J=this.inspect(W[Q]);return isNaN(parseInt(Q))?`${Q}: ${J}`:J}).join(", ");return Z?`${W.constructor.name}(${Z})`:W.constructor.name}#Z(W){if(W instanceof N)return"[]";let Z='charlist.from_string("',Q="[",J=W;while(J instanceof AW){let K=J.head;if(J=J.tail,Q!=="[")Q+=", ";if(Q+=this.inspect(K),Z)if(Number.isInteger(K)&&K>=32&&K<=126)Z+=String.fromCharCode(K);else Z=null}if(Z)return Z+'")';else return Q+"]"}#G(W){let Z='"';for(let Q=0;Q<W.length;Q++){let J=W[Q];switch(J){case`
`:Z+="\\n";break;case"\r":Z+="\\r";break;case"\t":Z+="\\t";break;case"\f":Z+="\\f";break;case"\\":Z+="\\\\";break;case'"':Z+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Z+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Z+=J}}return Z+='"',Z}#V(W){return`//utfcodepoint(${String.fromCodePoint(W.value)})`}#Y(W){if(W.bitSize===0)return"<<>>";let Z="<<";for(let Q=0;Q<W.byteSize-1;Q++)Z+=W.byteAt(Q).toString(),Z+=", ";if(W.byteSize*8===W.bitSize)Z+=W.byteAt(W.byteSize-1).toString();else{let Q=W.bitSize%8;Z+=W.byteAt(W.byteSize-1)>>8-Q,Z+=`:size(${Q})`}return Z+=">>",Z}}function bJ(W,Z){if(W instanceof HW||W instanceof WeakMap||W instanceof Map){let J={},K=W.get(Z,J);if(K===J)return new A(new MW);return new A(new JW(K))}let Q=Number.isInteger(Z);if(Q&&Z>=0&&Z<8&&W instanceof QW){let J=0;for(let K of W){if(J===Z)return new A(new JW(K));J++}return new B("Indexable")}if(Q&&Array.isArray(W)||W&&typeof W==="object"||W&&Object.getPrototypeOf(W)===Object.prototype){if(Z in W)return new A(new JW(W[Z]));return new A(new MW)}return new B(Q?"Indexable":"Dict")}function gJ(W,Z,Q,J,K){if(!(W instanceof QW||Array.isArray(W))){let X=new $W("List",mW(W),K);return[K,QW.fromArray([X])]}let G=[];for(let X of W){let V=Z(X),[Y,H]=V;if(H instanceof AW){let[U,q]=Q(V,J.toString());return[K,q]}G.push(Y),J++}return[QW.fromArray(G),K]}function fJ(W){if(Number.isInteger(W))return new A(W);return new B(0)}function vJ(W){if(typeof W==="string")return new A(W);return new B("")}function lJ(W){return W===""}function Z6(W,Z){return W+Z}function WG(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return J;else{let K=Q.head;W=Q.tail,Z=J+K}}}function rJ(W){return WG(W,"")}function ZG(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return G;else{let X=J.head;W=J.tail,Z=K,Q=G+K+X}}}function zQ(W,Z){if(W instanceof N)return"";else{let{head:Q,tail:J}=W;return ZG(J,Z,Q)}}function Q6(W,Z){if(Z==="")return aQ(W);else{let J=l(W),K=eQ(J,Z);return BW(K,l)}}function J6(W){let Z=cJ(W);if(Z instanceof A){let Q=Z[0][0],J=Z[0][1];return Z6(tQ(Q),oQ(J))}else return""}function K6(W,Z){if(W instanceof A){let Q=W[0];return new A(Z(Q))}else return W}function nJ(W,Z){if(W instanceof A)return W;else{let Q=W[0];return new B(Z(Q))}}function iJ(W,Z){if(W instanceof A){let Q=W[0];return Z(Q)}else return W}function aJ(W,Z){if(W instanceof A)return W[0];else return Z}function oJ(W){try{let Z=JSON.parse(W);return new A(Z)}catch(Z){return new B(KG(Z,W))}}function KG(W,Z){if(GG(W))return new G6;return XG(W,Z)}function GG(W){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(W.message)}function XG(W,Z){let Q=[VG,YG,HG,MG];for(let J of Q){let K=J(W,Z);if(K)return K}return new MZ("",0)}function VG(W){let Q=/unexpected token '(.)', ".+" is not valid JSON/i.exec(W.message);if(!Q)return null;let J=DQ(Q[1]);return new MZ(J,-1)}function YG(W){let Q=/unexpected token (.) in JSON at position (\d+)/i.exec(W.message);if(!Q)return null;let J=DQ(Q[1]),K=Number(Q[2]);return new MZ(J,K)}function MG(W,Z){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(W.message);if(!J)return null;let K=Number(J[2]),G=Number(J[3]),X=UG(K,G,Z),V=DQ(Z[X]);return new MZ(V,X)}function HG(W){let Q=/unexpected (identifier|token) "(.)"/i.exec(W.message);if(!Q)return null;let J=DQ(Q[2]);return new MZ(J,0)}function DQ(W){return"0x"+W.charCodeAt(0).toString(16).toUpperCase()}function UG(W,Z,Q){if(W===1)return Z-1;let J=1,K=0;return Q.split("").find((G,X)=>{if(G===`
`)J+=1;if(J===W)return K=X+Z,!0;return!1}),K}class G6 extends I{}class MZ extends I{constructor(W){super();this[0]=W}}class tJ extends I{constructor(W){super();this[0]=W}}function RG(W,Z){return iJ(oJ(W),(Q)=>{let J=cW(Q,Z);return nJ(J,(K)=>{return new tJ(K)})})}function eJ(W,Z){return RG(W,Z)}function Q8(W,Z,Q){if(W)return Z;else return Q()}function r(W){return W}var PW=()=>globalThis?.document,AQ="http://www.w3.org/1999/xhtml",OQ=1,V6=3;var G8=!!globalThis.HTMLElement?.prototype?.moveBefore;var w=M([]),TQ=new MW;var SG=new oW,AG=new t,OG=new e;function BQ(W,Z){if(W.name===Z.name)return OG;else if(W.name<Z.name)return AG;else return SG}class vW extends I{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class PQ extends I{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class NW extends I{constructor(W,Z,Q,J,K,G,X,V,Y){super();this.kind=W,this.name=Z,this.handler=Q,this.include=J,this.prevent_default=K,this.stop_propagation=G,this.immediate=X,this.debounce=V,this.throttle=Y}}class WQ extends I{constructor(W,Z,Q){super();this.prevent_default=W,this.stop_propagation=Z,this.message=Q}}class U8 extends I{constructor(W){super();this.kind=W}}function LG(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof N)return J;else{let K=Q.head;if(K instanceof vW){let G=K.name;if(G==="")W=Q.tail,Z=J;else if(G==="class"){let X=K.value;if(X==="")W=Q.tail,Z=J;else{let V=Q.tail;if(V instanceof N){let Y=K;W=V,Z=F(Y,J)}else{let Y=V.head;if(Y instanceof vW)if(Y.name==="class"){let U=K.kind,q=X,D=V.tail,T=Y.value,S=q+" "+T,L=new vW(U,"class",S);W=F(L,D),Z=J}else{let U=K;W=V,Z=F(U,J)}else{let H=K;W=V,Z=F(H,J)}}}}else if(G==="style"){let X=K.value;if(X==="")W=Q.tail,Z=J;else{let V=Q.tail;if(V instanceof N){let Y=K;W=V,Z=F(Y,J)}else{let Y=V.head;if(Y instanceof vW)if(Y.name==="style"){let U=K.kind,q=X,D=V.tail,T=Y.value,S=q+";"+T,L=new vW(U,"style",S);W=F(L,D),Z=J}else{let U=K;W=V,Z=F(U,J)}else{let H=K;W=V,Z=F(H,J)}}}}else{let X=K;W=Q.tail,Z=F(X,J)}}else{let G=K;W=Q.tail,Z=F(G,J)}}}}function F8(W){if(W instanceof N)return W;else if(W.tail instanceof N)return W;else{let J=TJ(W,(K,G)=>{return BQ(G,K)});return LG(J,w)}}var H6=0;function R8(W,Z){return new vW(H6,W,Z)}var q8=1;var U6=2;function I8(W,Z,Q,J,K,G,X,V){return new NW(U6,W,Z,Q,J,K,G,X,V)}var F6=0;var R6=new U8(F6);var q6=2;function ZW(W,Z){return R8(W,Z)}function h(W){return ZW("class",W)}function I6(W,Z){return ZW("data-"+W,Z)}function N8(W){return ZW("id",W)}function EZ(W){return ZW("title",W)}function xZ(W){return ZW("href",W)}function kZ(W){return ZW("target",W)}function z8(W){return ZW("src",W)}function D8(W){return ZW("width",pW(W))}function S8(W){return ZW("height",pW(W))}function A8(W){return ZW("type",W)}class N6 extends I{constructor(W,Z,Q){super();this.synchronous=W,this.before_paint=Z,this.after_paint=Q}}class O8 extends I{constructor(W,Z,Q,J,K){super();this.dispatch=W,this.emit=Z,this.select=Q,this.root=J,this.provide=K}}function T8(W,Z,Q,J,K,G){let X=new O8(Z,Q,J,K,G);return PJ(W.synchronous,(V)=>{return V(X)})}var B8=new N6(M([]),M([]),M([]));function ZQ(){return B8}function P8(W){return qW(W,B8,(Z,Q)=>{return new N6(qW(Q.synchronous,Z.synchronous,IQ),qW(Q.before_paint,Z.before_paint,IQ),qW(Q.after_paint,Z.after_paint,IQ))})}function zW(){return null}function JQ(W,Z){let Q=W?.get(Z);if(Q!=null)return new A(Q);else return new B(void 0)}function KQ(W,Z){return W&&W.has(Z)}function HZ(W,Z,Q){return W??=new Map,W.set(Z,Q),W}function z6(W,Z){return W?.delete(Z),W}class D6 extends I{}class S6 extends I{constructor(W,Z){super();this.key=W,this.parent=Z}}class j8 extends I{constructor(W,Z){super();this.index=W,this.parent=Z}}function xG(W,Z){while(!0){let Q=W,J=Z;if(J instanceof N)return!1;else{let{head:K,tail:G}=J,X=W6(Q,K);if(X)return X;else W=Q,Z=G}}}function jW(W,Z,Q){if(Q==="")return new j8(Z,W);else return new S6(Q,W)}var jQ=new D6,XQ="\t";function C8(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof D6)if(J instanceof N)return"";else{let K=J.tail;return rJ(K)}else if(Q instanceof S6){let K=Q.key;W=Q.parent,Z=F(XQ,F(K,J))}else{let K=Q.index;W=Q.parent,Z=F(XQ,F(pW(K),J))}}}function kG(W){return C8(W,M([]))}function L8(W,Z){if(Z instanceof N)return!1;else return xG(kG(W),Z)}var A6=`
`;function O6(W,Z){return C8(W,M([A6,Z]))}class CW extends I{constructor(W,Z,Q,J,K){super();this.kind=W,this.key=Z,this.mapper=Q,this.children=J,this.keyed_children=K}}class LW extends I{constructor(W,Z,Q,J,K,G,X,V,Y,H){super();this.kind=W,this.key=Z,this.mapper=Q,this.namespace=J,this.tag=K,this.attributes=G,this.children=X,this.keyed_children=V,this.self_closing=Y,this.void=H}}class wW extends I{constructor(W,Z,Q,J){super();this.kind=W,this.key=Z,this.mapper=Q,this.content=J}}class yZ extends I{constructor(W,Z,Q,J,K,G,X){super();this.kind=W,this.key=Z,this.mapper=Q,this.namespace=J,this.tag=K,this.attributes=G,this.inner_html=X}}function gG(W,Z){if(Z==="")if(W==="area")return!0;else if(W==="base")return!0;else if(W==="br")return!0;else if(W==="col")return!0;else if(W==="embed")return!0;else if(W==="hr")return!0;else if(W==="img")return!0;else if(W==="input")return!0;else if(W==="link")return!0;else if(W==="meta")return!0;else if(W==="param")return!0;else if(W==="source")return!0;else if(W==="track")return!0;else if(W==="wbr")return!0;else return!1;else return!1}function E8(W,Z){if(Z instanceof CW)return new CW(Z.kind,W,Z.mapper,Z.children,Z.keyed_children);else if(Z instanceof LW)return new LW(Z.kind,W,Z.mapper,Z.namespace,Z.tag,Z.attributes,Z.children,Z.keyed_children,Z.self_closing,Z.void);else if(Z instanceof wW)return new wW(Z.kind,W,Z.mapper,Z.content);else return new yZ(Z.kind,W,Z.mapper,Z.namespace,Z.tag,Z.attributes,Z.inner_html)}var EW=0;function T6(W,Z,Q,J){return new CW(EW,W,Z,Q,J)}var UZ=1;function bZ(W,Z,Q,J,K,G,X,V,Y){return new LW(UZ,W,Z,Q,J,F8(K),G,X,V,Y||gG(J,Q))}var gZ=2;function B6(W,Z,Q){return new wW(gZ,W,Z,Q)}var x8=3;var P6=(W,Z)=>W===Z,RZ=(W,Z)=>{if(W===Z)return!0;if(W==null||Z==null)return!1;let Q=typeof W;if(Q!==typeof Z)return!1;if(Q!=="object")return!1;if(W.constructor!==Z.constructor)return!1;if(Array.isArray(W))return fG(W,Z);return vG(W,Z)},fG=(W,Z)=>{let Q=W.length;if(Q!==Z.length)return!1;while(Q--)if(!RZ(W[Q],Z[Q]))return!1;return!0},vG=(W,Z)=>{let Q=Object.keys(W),J=Q.length;if(Object.keys(Z).length!==J)return!1;while(J--){let K=Q[J];if(!Object.hasOwn(Z,K))return!1;if(!RZ(W[K],Z[K]))return!1}return!0};class dW extends I{constructor(W,Z,Q){super();this.handlers=W,this.dispatched_paths=Z,this.next_dispatched_paths=Q}}function C6(){return new dW(zW(),w,w)}function g8(W){return new dW(W.handlers,W.next_dispatched_paths,w)}function f8(W,Z,Q){return z6(W,O6(Z,Q))}function VQ(W,Z,Q){let J=f8(W.handlers,Z,Q);return new dW(J,W.dispatched_paths,W.next_dispatched_paths)}function k8(W,Z,Q){return qW(Q,W,(J,K)=>{if(K instanceof NW){let G=K.name;return f8(J,Z,G)}else return J})}function YQ(W,Z,Q,J){let K=F(Z,W.next_dispatched_paths),G=new dW(W.handlers,W.dispatched_paths,K),X=JQ(G.handlers,Z+A6+Q);if(X instanceof A){let V=X[0];return[G,cW(J,V)]}else return[G,new B(M([]))]}function CQ(W,Z){return L8(Z,W.dispatched_paths)}function v8(W,Z,Q,J,K){return HZ(W,O6(Q,J),aZ(K,(G)=>{return new WQ(G.prevent_default,G.stop_propagation,r(Z)(G.message))}))}function MQ(W,Z,Q,J,K){let G=v8(W.handlers,Z,Q,J,K);return new dW(G,W.dispatched_paths,W.next_dispatched_paths)}function y8(W,Z,Q,J){return qW(J,W,(K,G)=>{if(G instanceof NW){let{name:X,handler:V}=G;return v8(K,Z,Q,X,V)}else return K})}function QZ(W,Z){let Q=P6(W,r);if(P6(Z,r))return W;else if(Q)return Z;else return(K)=>{return W(Z(K))}}function b8(W,Z,Q,J){while(!0){let K=W,G=Z,X=Q,V=J;if(V instanceof N)return K;else{let{head:Y,tail:H}=V;W=h8(K,G,X,Y),Z=G,Q=X+1,J=H}}}function h8(W,Z,Q,J){if(J instanceof CW){let K=J.children,G=jW(Z,Q,J.key);return b8(W,G,0,K)}else if(J instanceof LW){let{attributes:K,children:G}=J,X=jW(Z,Q,J.key),Y=k8(W,X,K);return b8(Y,X,0,G)}else if(J instanceof wW)return W;else{let K=J.attributes,G=jW(Z,Q,J.key);return k8(W,G,K)}}function sW(W,Z,Q,J){let K=h8(W.handlers,Z,Q,J);return new dW(K,W.dispatched_paths,W.next_dispatched_paths)}function j6(W,Z,Q,J,K){while(!0){let G=W,X=Z,V=Q,Y=J,H=K;if(H instanceof N)return G;else{let{head:U,tail:q}=H;W=_8(G,X,V,Y,U),Z=X,Q=V,J=Y+1,K=q}}}function _8(W,Z,Q,J,K){if(K instanceof CW){let G=K.children,X=jW(Q,J,K.key),V=QZ(Z,K.mapper);return j6(W,V,X,0,G)}else if(K instanceof LW){let{attributes:G,children:X}=K,V=jW(Q,J,K.key),Y=QZ(Z,K.mapper),U=y8(W,Y,V,G);return j6(U,Y,V,0,X)}else if(K instanceof wW)return W;else{let G=K.attributes,X=jW(Q,J,K.key),V=QZ(Z,K.mapper);return y8(W,V,X,G)}}function lW(W,Z,Q,J,K){let G=_8(W.handlers,Z,Q,J,K);return new dW(G,W.dispatched_paths,W.next_dispatched_paths)}function u8(W){return lW(C6(),r,jQ,0,W)}function m8(W,Z,Q,J,K){let G=j6(W.handlers,Z,Q,J,K);return new dW(G,W.dispatched_paths,W.next_dispatched_paths)}function GW(W,Z,Q){return bZ("",r,"",W,Z,Q,zW(),!1,!1)}function LQ(W,Z,Q,J){return bZ("",r,W,Z,Q,J,zW(),!1,!1)}function vZ(W){return B6("",r,W)}function $8(){return B6("",r,"")}function n(W){return vZ(W)}function c8(W,Z){return GW("footer",W,Z)}function p8(W,Z){return GW("header",W,Z)}function d8(W,Z){return GW("h1",W,Z)}function s8(W,Z){return GW("h2",W,Z)}function l8(W,Z){return GW("main",W,Z)}function r8(W,Z){return GW("nav",W,Z)}function YW(W,Z){return GW("div",W,Z)}function L6(W,Z){return GW("p",W,Z)}function hZ(W,Z){return GW("a",W,Z)}function w6(W){return GW("br",W,w)}function n8(W,Z){return GW("small",W,Z)}function wQ(W,Z){return GW("span",W,Z)}function i8(W,Z){return GW("strong",W,Z)}function a8(W){return GW("img",W,w)}function o8(W,Z){return GW("button",W,Z)}class HQ extends I{constructor(W,Z,Q,J){super();this.index=W,this.removed=Z,this.changes=Q,this.children=J}}class e8 extends I{constructor(W,Z){super();this.kind=W,this.content=Z}}class WK extends I{constructor(W,Z){super();this.kind=W,this.inner_html=Z}}class ZK extends I{constructor(W,Z,Q){super();this.kind=W,this.added=Z,this.removed=Q}}class QK extends I{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.before=Q}}class JK extends I{constructor(W,Z,Q){super();this.kind=W,this.index=Z,this.with=Q}}class KK extends I{constructor(W,Z){super();this.kind=W,this.index=Z}}class GK extends I{constructor(W,Z,Q){super();this.kind=W,this.children=Z,this.before=Q}}function E6(W,Z,Q,J){return new HQ(W,Z,Q,J)}var x6=0;function XK(W){return new e8(x6,W)}var k6=1;function VK(W){return new WK(k6,W)}var y6=2;function b6(W,Z){return new ZK(y6,W,Z)}var g6=3;function YK(W,Z){return new QK(g6,W,Z)}var f6=4;function MK(W){return new KK(f6,W)}var v6=5;function IZ(W,Z){return new JK(v6,W,Z)}var h6=6;function _6(W,Z){return new GK(h6,W,Z)}class UK extends I{constructor(W,Z,Q,J,K,G,X,V){super();this.kind=W,this.open_shadow_root=Z,this.will_adopt_styles=Q,this.observed_attributes=J,this.observed_properties=K,this.requested_contexts=G,this.provided_contexts=X,this.vdom=V}}class FK extends I{constructor(W,Z){super();this.kind=W,this.patch=Z}}class RK extends I{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.data=Q}}class qK extends I{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.value=Q}}class EQ extends I{constructor(W,Z){super();this.kind=W,this.messages=Z}}class xQ extends I{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class kQ extends I{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class yQ extends I{constructor(W,Z,Q,J){super();this.kind=W,this.path=Z,this.name=Q,this.event=J}}class u6 extends I{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.value=Q}}var _G=0;function IK(W,Z,Q,J,K,G,X){return new UK(_G,W,Z,Q,J,K,G,X)}var uG=1;function m6(W){return new FK(uG,W)}var mG=2;function NK(W,Z){return new RK(mG,W,Z)}var $G=3;function zK(W,Z){return new qK($G,W,Z)}class bQ extends I{constructor(W,Z){super();this.patch=W,this.events=Z}}class AK extends I{constructor(W,Z,Q){super();this.added=W,this.removed=Z,this.events=Q}}function cG(W,Z,Q,J){if(Q==="input"&&Z==="")return CQ(W,J);else if(Q==="select"&&Z==="")return CQ(W,J);else if(Q==="textarea"&&Z==="")return CQ(W,J);else return!1}function SK(W,Z,Q,J,K,G,X,V){while(!0){let Y=W,H=Z,U=Q,q=J,D=K,T=G,S=X,L=V;if(T instanceof N)if(D instanceof N)return new AK(S,L,q);else{let z=D.head;if(z instanceof NW){let E=z,O=D.tail,j=z.name,x=F(E,L),R=VQ(q,H,j);W=Y,Z=H,Q=U,J=R,K=O,G=T,X=S,V=x}else{let E=z,O=D.tail,j=F(E,L);W=Y,Z=H,Q=U,J=q,K=O,G=T,X=S,V=j}}else if(D instanceof N){let z=T.head;if(z instanceof NW){let E=z,O=T.tail,j=z.name,x=z.handler,R=F(E,S),P=MQ(q,U,H,j,x);W=Y,Z=H,Q=U,J=P,K=D,G=O,X=R,V=L}else{let E=z,O=T.tail,j=F(E,S);W=Y,Z=H,Q=U,J=q,K=D,G=O,X=j,V=L}}else{let{head:z,tail:E}=T,O=D.head,j=D.tail,x=BQ(O,z);if(x instanceof t)if(O instanceof NW){let R=O.name,P=F(O,L),C=VQ(q,H,R);W=Y,Z=H,Q=U,J=C,K=j,G=T,X=S,V=P}else{let R=F(O,L);W=Y,Z=H,Q=U,J=q,K=j,G=T,X=S,V=R}else if(x instanceof e)if(z instanceof vW)if(O instanceof vW){let R,P=z.name;if(P==="value")R=Y||O.value!==z.value;else if(P==="checked")R=Y||O.value!==z.value;else if(P==="selected")R=Y||O.value!==z.value;else R=O.value!==z.value;let C=R,y;if(C)y=F(z,S);else y=S;let b=y;W=Y,Z=H,Q=U,J=q,K=j,G=E,X=b,V=L}else if(O instanceof NW){let R=O.name,P=F(z,S),C=F(O,L),y=VQ(q,H,R);W=Y,Z=H,Q=U,J=y,K=j,G=E,X=P,V=C}else{let R=F(z,S),P=F(O,L);W=Y,Z=H,Q=U,J=q,K=j,G=E,X=R,V=P}else if(z instanceof PQ)if(O instanceof PQ){let R,P=z.name;if(P==="scrollLeft")R=!0;else if(P==="scrollRight")R=!0;else if(P==="value")R=Y||!RZ(O.value,z.value);else if(P==="checked")R=Y||!RZ(O.value,z.value);else if(P==="selected")R=Y||!RZ(O.value,z.value);else R=!RZ(O.value,z.value);let C=R,y;if(C)y=F(z,S);else y=S;let b=y;W=Y,Z=H,Q=U,J=q,K=j,G=E,X=b,V=L}else if(O instanceof NW){let R=O.name,P=F(z,S),C=F(O,L),y=VQ(q,H,R);W=Y,Z=H,Q=U,J=y,K=j,G=E,X=P,V=C}else{let R=F(z,S),P=F(O,L);W=Y,Z=H,Q=U,J=q,K=j,G=E,X=R,V=P}else if(O instanceof NW){let{name:R,handler:P}=z,C=O.prevent_default.kind!==z.prevent_default.kind||O.stop_propagation.kind!==z.stop_propagation.kind||O.immediate!==z.immediate||O.debounce!==z.debounce||O.throttle!==z.throttle,y;if(C)y=F(z,S);else y=S;let b=y,v=MQ(q,U,H,R,P);W=Y,Z=H,Q=U,J=v,K=j,G=E,X=b,V=L}else{let{name:R,handler:P}=z,C=F(z,S),y=F(O,L),b=MQ(q,U,H,R,P);W=Y,Z=H,Q=U,J=b,K=j,G=E,X=C,V=y}else if(z instanceof NW){let{name:R,handler:P}=z,C=F(z,S),y=MQ(q,U,H,R,P);W=Y,Z=H,Q=U,J=y,K=D,G=E,X=C,V=L}else{let R=F(z,S);W=Y,Z=H,Q=U,J=q,K=D,G=E,X=R,V=L}}}}function $6(W,Z,Q,J,K,G,X,V,Y,H,U,q,D,T){while(!0){let S=W,L=Z,z=Q,E=J,O=K,j=G,x=X,R=V,P=Y,C=H,y=U,b=q,v=D,a=T;if(z instanceof N)if(S instanceof N)return new bQ(new HQ(P,x,y,b),a);else{let{head:RW,tail:hW}=S,d;if(RW.key===""||!KQ(O,RW.key))d=x+1;else d=x;let k=d,$=sW(a,C,R,RW);W=hW,Z=L,Q=z,J=E,K=O,G=j,X=k,V=R,Y=P,H=C,U=y,q=b,D=v,T=$}else if(S instanceof N){let RW=m8(a,v,C,R,z),hW=_6(z,R-j),d=F(hW,y);return new bQ(new HQ(P,x,d,b),RW)}else{let RW=z.head,hW=S.head;if(hW.key!==RW.key){let d=z.tail,c=S.tail,k=JQ(L,RW.key),$=KQ(E,hW.key);if(k instanceof A)if($){let f=k[0];if(KQ(O,hW.key))W=c,Z=L,Q=z,J=E,K=O,G=j-1,X=x,V=R,Y=P,H=C,U=y,q=b,D=v,T=a;else{let m=R-j,g=F(YK(RW.key,m),y),s=HZ(O,RW.key,void 0),u=j+1;W=F(f,S),Z=L,Q=z,J=E,K=s,G=u,X=x,V=R,Y=P,H=C,U=g,q=b,D=v,T=a}}else{let f=R-j,_=F(MK(f),y),m=sW(a,C,R,hW),g=j-1;W=c,Z=L,Q=z,J=E,K=O,G=g,X=x,V=R,Y=P,H=C,U=_,q=b,D=v,T=m}else if($){let f=R-j,_=lW(a,v,C,R,RW),m=_6(M([RW]),f),g=F(m,y);W=S,Z=L,Q=d,J=E,K=O,G=j+1,X=x,V=R+1,Y=P,H=C,U=g,q=b,D=v,T=_}else{let f=IZ(R-j,RW),_,g=sW(a,C,R,hW);_=lW(g,v,C,R,RW);let s=_;W=c,Z=L,Q=d,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(f,y),q=b,D=v,T=s}}else{let d=S.head;if(d instanceof CW){let c=z.head;if(c instanceof CW){let k=c,$=z.tail,f=d,_=S.tail,m=QZ(v,k.mapper),g=jW(C,R,k.key),s=$6(f.children,f.keyed_children,k.children,k.keyed_children,zW(),0,0,0,R,g,w,w,m,a),u,i=s.patch;if(i.children instanceof N)if(i.changes instanceof N)if(i.removed===0)u=b;else u=F(s.patch,b);else u=F(s.patch,b);else u=F(s.patch,b);let xW=u;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=y,q=xW,D=v,T=s.events}else{let k=c,$=z.tail,f=d,_=S.tail,m=IZ(R-j,k),g,u=sW(a,C,R,f);g=lW(u,v,C,R,k);let i=g;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(m,y),q=b,D=v,T=i}}else if(d instanceof LW){let c=z.head;if(c instanceof LW){let k=c,$=d;if($.namespace===k.namespace&&$.tag===k.tag){let f=z.tail,_=S.tail,m=QZ(v,k.mapper),g=jW(C,R,k.key),s=cG(a,k.namespace,k.tag,g),u=SK(s,g,m,a,$.attributes,k.attributes,w,w),i,_W,xW;i=u.added,_W=u.removed,xW=u.events;let KZ;if(_W instanceof N&&i instanceof N)KZ=w;else KZ=M([b6(i,_W)]);let AZ=KZ,OZ=$6($.children,$.keyed_children,k.children,k.keyed_children,zW(),0,0,0,R,g,AZ,w,m,xW),iW,GZ=OZ.patch;if(GZ.children instanceof N)if(GZ.changes instanceof N)if(GZ.removed===0)iW=b;else iW=F(OZ.patch,b);else iW=F(OZ.patch,b);else iW=F(OZ.patch,b);let K9=iW;W=_,Z=L,Q=f,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=y,q=K9,D=v,T=OZ.events}else{let f=c,_=z.tail,m=d,g=S.tail,s=IZ(R-j,f),u,_W=sW(a,C,R,m);u=lW(_W,v,C,R,f);let xW=u;W=g,Z=L,Q=_,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(s,y),q=b,D=v,T=xW}}else{let k=c,$=z.tail,f=d,_=S.tail,m=IZ(R-j,k),g,u=sW(a,C,R,f);g=lW(u,v,C,R,k);let i=g;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(m,y),q=b,D=v,T=i}}else if(d instanceof wW){let c=z.head;if(c instanceof wW){let k=c;if(d.content===k.content){let f=z.tail;W=S.tail,Z=L,Q=f,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=y,q=b,D=v,T=a}else{let f=c,_=z.tail,m=S.tail,g=E6(R,0,M([XK(f.content)]),w);W=m,Z=L,Q=_,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=y,q=F(g,b),D=v,T=a}}else{let k=c,$=z.tail,f=d,_=S.tail,m=IZ(R-j,k),g,u=sW(a,C,R,f);g=lW(u,v,C,R,k);let i=g;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(m,y),q=b,D=v,T=i}}else{let c=z.head;if(c instanceof yZ){let k=c,$=z.tail,f=d,_=S.tail,m=QZ(v,k.mapper),g=jW(C,R,k.key),s=SK(!1,g,m,a,f.attributes,k.attributes,w,w),u,i,_W;u=s.added,i=s.removed,_W=s.events;let xW;if(i instanceof N&&u instanceof N)xW=w;else xW=M([b6(u,i)]);let KZ=xW,AZ;if(f.inner_html===k.inner_html)AZ=KZ;else AZ=F(VK(k.inner_html),KZ);let iW=AZ,GZ;if(iW instanceof N)GZ=b;else GZ=F(E6(R,0,iW,M([])),b);let XJ=GZ;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=y,q=XJ,D=v,T=_W}else{let k=c,$=z.tail,f=d,_=S.tail,m=IZ(R-j,k),g,u=sW(a,C,R,f);g=lW(u,v,C,R,k);let i=g;W=_,Z=L,Q=$,J=E,K=O,G=j,X=x,V=R+1,Y=P,H=C,U=F(m,y),q=b,D=v,T=i}}}}}}function _Z(W,Z,Q){return $6(M([Z]),zW(),M([Q]),zW(),zW(),0,0,0,0,jQ,w,w,r,g8(W))}var{setTimeout:pG,clearTimeout:c6}=globalThis,dG=(W,Z)=>PW().createElementNS(W,Z),sG=(W)=>PW().createTextNode(W),lG=()=>PW().createDocumentFragment(),uZ=(W,Z,Q)=>W.insertBefore(Z,Q),TK=G8?(W,Z,Q)=>W.moveBefore(Z,Q):uZ,rG=(W,Z)=>W.removeChild(Z),nG=(W,Z)=>W.getAttribute(Z),BK=(W,Z,Q)=>W.setAttribute(Z,Q),iG=(W,Z)=>W.removeAttribute(Z),aG=(W,Z,Q,J)=>W.addEventListener(Z,Q,J),PK=(W,Z,Q)=>W.removeEventListener(Z,Q),oG=(W,Z)=>W.innerHTML=Z,tG=(W,Z)=>W.data=Z,rW=Symbol("lustre");class LK{constructor(W,Z,Q,J){this.kind=W,this.key=J,this.parent=Z,this.children=[],this.node=Q,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===EW?this.node.parentNode:this.node}}var nW=(W,Z,Q,J,K)=>{let G=new LK(W,Z,Q,K);return Q[rW]=G,Z?.children.splice(J,0,G),G},eG=(W)=>{let Z="";for(let Q=W[rW];Q.parent;Q=Q.parent)if(Q.key)Z=`${XQ}${Q.key}${Z}`;else{let J=Q.parent.children.indexOf(Q);Z=`${XQ}${J}${Z}`}return Z.slice(1)};class d6{#W=null;#K=()=>{};#J=!1;#Q=!1;constructor(W,Z,{useServerEvents:Q=!1,exposeKeys:J=!1}={}){this.#W=W,this.#K=Z,this.#J=Q,this.#Q=J}mount(W){nW(UZ,null,this.#W,0,null),this.#D(this.#W,null,this.#W[rW],0,W)}push(W){this.#Z.push({node:this.#W[rW],patch:W}),this.#G()}#Z=[];#G(){let W=this.#Z;while(W.length){let{node:Z,patch:Q}=W.pop(),{children:J}=Z,{changes:K,removed:G,children:X}=Q;if(NZ(K,(V)=>this.#V(Z,V)),G)this.#q(Z,J.length-G,G);NZ(X,(V)=>{let Y=J[V.index|0];this.#Z.push({node:Y,patch:V})})}}#V(W,Z){switch(Z.kind){case x6:this.#B(W,Z);break;case k6:this.#S(W,Z);break;case y6:this.#I(W,Z);break;case g6:this.#H(W,Z);break;case f6:this.#F(W,Z);break;case v6:this.#U(W,Z);break;case h6:this.#Y(W,Z);break}}#Y(W,{children:Z,before:Q}){let J=lG(),K=this.#M(W,Q);this.#z(J,null,W,Q|0,Z),uZ(W.parentNode,J,K)}#U(W,{index:Z,with:Q}){this.#q(W,Z|0,1);let J=this.#M(W,Z);this.#D(W.parentNode,J,W,Z|0,Q)}#M(W,Z){Z=Z|0;let{children:Q}=W,J=Q.length;if(Z<J)return Q[Z].node;let K=Q[J-1];if(!K&&W.kind!==EW)return null;if(!K)K=W;while(K.kind===EW&&K.children.length)K=K.children[K.children.length-1];return K.node.nextSibling}#H(W,{key:Z,before:Q}){Q=Q|0;let{children:J,parentNode:K}=W,G=J[Q].node,X=J[Q];for(let U=Q+1;U<J.length;++U){let q=J[U];if(J[U]=X,X=q,q.key===Z){J[Q]=q;break}}let{kind:V,node:Y,children:H}=X;if(TK(K,Y,G),V===EW)this.#X(K,H,G)}#X(W,Z,Q){for(let J=0;J<Z.length;++J){let{kind:K,node:G,children:X}=Z[J];if(TK(W,G,Q),K===EW)this.#X(W,X,Q)}}#F(W,{index:Z}){this.#q(W,Z,1)}#q(W,Z,Q){let{children:J,parentNode:K}=W,G=J.splice(Z,Q);for(let X=0;X<G.length;++X){let{kind:V,node:Y,children:H}=G[X];if(rG(K,Y),this.#R(G[X]),V===EW)G.push(...H)}}#R(W){let{debouncers:Z,children:Q}=W;for(let{timeout:J}of Z.values())if(J)c6(J);Z.clear(),NZ(Q,(J)=>this.#R(J))}#I({node:W,handlers:Z,throttles:Q,debouncers:J},{added:K,removed:G}){NZ(G,({name:X})=>{if(Z.delete(X))PK(W,X,p6),this.#N(Q,X,0),this.#N(J,X,0);else iG(W,X),CK[X]?.removed?.(W,X)}),NZ(K,(X)=>this.#T(W,X))}#B({node:W},{content:Z}){tG(W,Z??"")}#S({node:W},{inner_html:Z}){oG(W,Z??"")}#z(W,Z,Q,J,K){NZ(K,(G)=>this.#D(W,Z,Q,J++,G))}#D(W,Z,Q,J,K){switch(K.kind){case UZ:{let G=this.#A(Q,J,K);this.#z(G,null,G[rW],0,K.children),uZ(W,G,Z);break}case gZ:{let G=this.#O(Q,J,K);uZ(W,G,Z);break}case EW:{let G=this.#O(Q,J,K);uZ(W,G,Z),this.#z(W,Z,G[rW],0,K.children);break}case x8:{let G=this.#A(Q,J,K);this.#S({node:G},K),uZ(W,G,Z);break}}}#A(W,Z,{kind:Q,key:J,tag:K,namespace:G,attributes:X}){let V=dG(G||AQ,K);if(nW(Q,W,V,Z,J),this.#Q&&J)BK(V,"data-lustre-key",J);return NZ(X,(Y)=>this.#T(V,Y)),V}#O(W,Z,{kind:Q,key:J,content:K}){let G=sG(K??"");return nW(Q,W,G,Z,J),G}#T(W,Z){let{debouncers:Q,handlers:J,throttles:K}=W[rW],{kind:G,name:X,value:V,prevent_default:Y,debounce:H,throttle:U}=Z;switch(G){case H6:{let q=V??"";if(X==="virtual:defaultValue"){W.defaultValue=q;return}if(q!==nG(W,X))BK(W,X,q);CK[X]?.added?.(W,q);break}case q8:W[X]=V;break;case U6:{if(J.has(X))PK(W,X,p6);let q=Y.kind===F6;aG(W,X,p6,{passive:q}),this.#N(K,X,U),this.#N(Q,X,H),J.set(X,(D)=>this.#P(Z,D));break}}}#N(W,Z,Q){let J=W.get(Z);if(Q>0)if(J)J.delay=Q;else W.set(Z,{delay:Q});else if(J){let{timeout:K}=J;if(K)c6(K);W.delete(Z)}}#P(W,Z){let{currentTarget:Q,type:J}=Z,{debouncers:K,throttles:G}=Q[rW],X=eG(Q),{prevent_default:V,stop_propagation:Y,include:H,immediate:U}=W;if(V.kind===q6)Z.preventDefault();if(Y.kind===q6)Z.stopPropagation();if(J==="submit")Z.detail??={},Z.detail.formData=[...new FormData(Z.target,Z.submitter).entries()];let q=this.#J?W0(Z,H??[]):Z,D=G.get(J);if(D){let S=Date.now(),L=D.last||0;if(S>L+D.delay)D.last=S,D.lastEvent=Z,this.#K(q,X,J,U)}let T=K.get(J);if(T)c6(T.timeout),T.timeout=pG(()=>{if(Z===G.get(J)?.lastEvent)return;this.#K(q,X,J,U)},T.delay);if(!D&&!T)this.#K(q,X,J,U)}}var NZ=(W,Z)=>{if(Array.isArray(W))for(let Q=0;Q<W.length;Q++)Z(W[Q]);else if(W)for(W;W.head;W=W.tail)Z(W.head)},p6=(W)=>{let{currentTarget:Z,type:Q}=W;Z[rW].handlers.get(Q)(W)},W0=(W,Z=[])=>{let Q={};if(W.type==="input"||W.type==="change")Z.push("target.value");if(W.type==="submit")Z.push("detail.formData");for(let J of Z){let K=J.split(".");for(let G=0,X=W,V=Q;G<K.length;G++){if(G===K.length-1){V[K[G]]=X[K[G]];break}V=V[K[G]]??={},X=X[K[G]]}}return Q},jK=(W)=>{return{added(Z){Z[W]=!0},removed(Z){Z[W]=!1}}},Z0=(W)=>{return{added(Z,Q){Z[W]=Q}}},CK={checked:jK("checked"),selected:jK("selected"),value:Z0("value"),autofocus:{added(W){queueMicrotask(()=>{W.focus?.()})}},autoplay:{added(W){try{W.play?.()}catch(Z){console.error(Z)}}}};function Q0(W,Z,Q){while(!0){let J=W,K=Z,G=Q;if(J instanceof N)return[K,p(G)];else{let X=J.tail,V=J.head[0],Y=J.head[1],H=E8(V,Y),U;if(V==="")U=K;else U=HZ(K,V,H);let q=U,D=F(H,G);W=X,Z=q,Q=D}}}function s6(W){return Q0(W,zW(),w)}function wK(W,Z,Q){let J=s6(Q),K,G;return K=J[0],G=J[1],bZ("",r,"",W,Z,G,K,!1,!1)}function EK(W,Z,Q,J){let K=s6(J),G,X;return G=K[0],X=K[1],bZ("",r,W,Z,Q,X,G,!1,!1)}function xK(W){let Z=s6(W),Q,J;return Q=Z[0],J=Z[1],T6("",r,J,Q)}var kK=(W)=>{let Z=nW(UZ,null,W,0,null),Q=0;for(let X=W.firstChild;X;X=X.nextSibling)if(yK(X))Q+=1;if(Q===0){let X=PW().createTextNode("");return nW(gZ,Z,X,0,null),W.replaceChildren(X),$8()}if(Q===1)return l6(Z,W).head[1];let J=PW().createTextNode(""),K=nW(EW,Z,J,0,null),G=l6(K,W);return W.insertBefore(J,W.firstChild),xK(G)},yK=(W)=>{switch(W.nodeType){case OQ:return!0;case V6:return!!W.data;default:return!1}},J0=(W,Z,Q,J)=>{if(!yK(Z))return null;switch(Z.nodeType){case OQ:{let K=nW(UZ,W,Z,J,Q),G=Z.localName,X=Z.namespaceURI,V=!X||X===AQ;if(V&&K0.includes(G))G0(G,Z);let Y=X0(Z),H=l6(K,Z);return V?wK(G,Y,H):EK(X,G,Y,H)}case V6:return nW(gZ,W,Z,J,null),vZ(Z.data);default:return null}},K0=["input","select","textarea"],G0=(W,Z)=>{let{value:Q,checked:J}=Z;if(W==="input"&&Z.type==="checkbox"&&!J)return;if(W==="input"&&Z.type==="radio"&&!J)return;if(Z.type!=="checkbox"&&Z.type!=="radio"&&!Q)return;queueMicrotask(()=>{if(Z.value=Q,Z.checked=J,Z.dispatchEvent(new Event("input",{bubbles:!0})),Z.dispatchEvent(new Event("change",{bubbles:!0})),PW().activeElement!==Z)Z.dispatchEvent(new Event("blur",{bubbles:!0}))})},l6=(W,Z)=>{let Q=null,J=Z.firstChild,K=null,G=0;while(J){let X=J.nodeType===OQ?J.getAttribute("data-lustre-key"):null;if(X!=null)J.removeAttribute("data-lustre-key");let V=J0(W,J,X,G),Y=J.nextSibling;if(V){let H=new AW([X??"",V],null);if(K)K=K.tail=H;else K=Q=H;G+=1}else Z.removeChild(J);J=Y}if(!K)return w;return K.tail=w,Q},X0=(W)=>{let Z=W.attributes.length,Q=w;while(Z-- >0){let J=W.attributes[Z];if(J.name==="xmlns")continue;Q=new AW(V0(J),Q)}return Q},V0=(W)=>{let{localName:Z,value:Q}=W;return ZW(Z,Q)};var UQ=()=>!!PW();class gQ{constructor(W,[Z,Q],J,K){this.root=W,this.#W=Z,this.#K=J,this.#J=K,this.root.addEventListener("context-request",(G)=>{if(!(G.context&&G.callback))return;if(!this.#V.has(G.context))return;G.stopImmediatePropagation();let X=this.#V.get(G.context);if(G.subscribe){let V=()=>{X.subscribers=X.subscribers.filter((Y)=>Y!==G.callback)};X.subscribers.push([G.callback,V]),G.callback(X.value,V)}else G.callback(X.value)}),this.#G=new d6(this.root,(G,X,V)=>{let[Y,H]=YQ(this.#Z,X,V,G);if(this.#Z=Y,H.isOk()){let U=H[0];if(U.stop_propagation)G.stopPropagation();if(U.prevent_default)G.preventDefault();this.dispatch(U.message,!1)}}),this.#Q=kK(this.root),this.#Z=C6(),this.#F=!0,this.#R(Q)}root=null;dispatch(W,Z=!1){if(this.#F||=Z,this.#Y)this.#U.push(W);else{let[Q,J]=this.#J(this.#W,W);this.#W=Q,this.#R(J)}}emit(W,Z){(this.root.host??this.root).dispatchEvent(new CustomEvent(W,{detail:Z,bubbles:!0,composed:!0}))}provide(W,Z){if(!this.#V.has(W))this.#V.set(W,{value:Z,subscribers:[]});else{let Q=this.#V.get(W);Q.value=Z;for(let J=Q.subscribers.length-1;J>=0;J--){let[K,G]=Q.subscribers[J];if(!K){Q.subscribers.splice(J,1);continue}K(Z,G)}}}#W;#K;#J;#Q;#Z;#G;#V=new Map;#Y=!1;#U=[];#M=w;#H=w;#X=null;#F=!1;#q={dispatch:(W,Z)=>this.dispatch(W,Z),emit:(W,Z)=>this.emit(W,Z),select:()=>{},root:()=>this.root,provide:(W,Z)=>this.provide(W,Z)};#R(W){this.#Y=!0;while(!0){for(let Z=W.synchronous;Z.tail;Z=Z.tail)Z.head(this.#q);if(this.#M=gK(this.#M,W.before_paint),this.#H=gK(this.#H,W.after_paint),!this.#U.length)break;[this.#W,W]=this.#J(this.#W,this.#U.shift())}if(this.#Y=!1,this.#F)cancelAnimationFrame(this.#X),this.#I();else if(!this.#X)this.#X=requestAnimationFrame(()=>{this.#I()})}#I(){this.#F=!1,this.#X=null;let W=this.#K(this.#W),{patch:Z,events:Q}=_Z(this.#Z,this.#Q,W);if(this.#Z=Q,this.#Q=W,this.#G.push(Z),this.#M instanceof AW){let J=bK(this.#M);this.#M=w,queueMicrotask(()=>{this.#F=!0,this.#R(J)})}if(this.#H instanceof AW){let J=bK(this.#H);this.#H=w,requestAnimationFrame(()=>{this.#F=!0,this.#R(J)})}}}function bK(W){return{synchronous:W,after_paint:w,before_paint:w}}function gK(W,Z){if(W instanceof N)return Z;else if(Z instanceof N)return W;else return iZ(W,Z)}class n6 extends I{constructor(W){super();this.message=W}}class i6 extends I{constructor(W){super();this.callback=W}}class a6 extends I{constructor(W){super();this.callback=W}}class JZ extends I{constructor(W){super();this.message=W}}class zZ extends I{constructor(W,Z){super();this.name=W,this.data=Z}}class fQ extends I{constructor(W,Z){super();this.key=W,this.value=Z}}class DZ extends I{}class vK extends I{constructor(W,Z,Q,J,K,G,X,V,Y,H){super();this.open_shadow_root=W,this.adopt_styles=Z,this.delegates_focus=Q,this.attributes=J,this.properties=K,this.contexts=G,this.is_form_associated=X,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function hK(W){let Z=new vK(!0,!0,!1,w,w,w,!1,TQ,TQ,TQ);return qW(W,Z,(Q,J)=>{return J.apply(Q)})}class uK{#W;constructor(W,[Z,Q],J,K){this.#W=new gQ(W,[Z,Q],K,J)}send(W){switch(W.constructor){case JZ:{this.dispatch(W.message,!1);break}case zZ:{this.emit(W.name,W.data);break}case DZ:break}}dispatch(W,Z){this.#W.dispatch(W,Z)}emit(W,Z){this.#W.emit(W,Z)}}var mK=({init:W,update:Z,view:Q},J,K)=>{if(!UQ())return new B(new FQ);let G=J instanceof HTMLElement?J:PW().querySelector(J);if(!G)return new B(new o6(J));return new A(new uK(G,W(K),Z,Q))};class Y0{#W;#K;#J;#Q;#Z;#G;#V=BZ();#Y=new Set;constructor([W,Z],Q,J,K){this.#W=W,this.#K=Q,this.#J=J,this.#Q=K,this.#Z=this.#J(this.#W),this.#G=u8(this.#Z),this.#X(Z)}send(W){switch(W.constructor){case n6:{let{message:Z}=W,Q=this.#U(Z),J=_Z(this.#G,this.#Z,Q);this.#Z=Q,this.#G=J.events,this.broadcast(m6(J.patch));return}case i6:{let{callback:Z}=W;this.#Y.add(Z),Z(IK(this.#Q.open_shadow_root,this.#Q.adopt_styles,rZ(this.#Q.attributes),rZ(this.#Q.properties),rZ(this.#Q.contexts),this.#V,this.#Z));return}case a6:{let{callback:Z}=W;this.#Y.delete(Z);return}case JZ:{let{message:Z}=W,[Q,J]=this.#K(this.#W,Z),K=this.#J(Q),G=_Z(this.#G,this.#Z,K);this.#X(J),this.#W=Q,this.#Z=K,this.#G=G.events,this.broadcast(m6(G.patch));return}case zZ:{let{name:Z,data:Q}=W;this.broadcast(NK(Z,Q));return}case fQ:{let{key:Z,value:Q}=W;this.#V=lZ(this.#V,Z,Q),this.broadcast(zK(Z,Q));return}case DZ:{this.#W=null,this.#K=null,this.#J=null,this.#Q=null,this.#Z=null,this.#G=null,this.#V=null,this.#Y.clear();return}default:return}}broadcast(W){for(let Z of this.#Y)Z(W)}#U(W){switch(W.constructor){case EQ:{let{messages:Z}=W,Q=this.#W,J=ZQ();for(let K=Z;K.head;K=K.tail){let G=this.#U(K.head);if(G instanceof A){Q=G[0][0],J=P8(QW.fromArray([J,G[0][1]]));break}}return this.#X(J),this.#W=Q,this.#J(this.#W)}case xQ:{let{name:Z,value:Q}=W,J=this.#M(Z,Q);if(J instanceof B)return this.#Z;else{let[K,G]=this.#K(this.#W,J[0]);return this.#X(G),this.#W=K,this.#J(this.#W)}}case kQ:{let{name:Z,value:Q}=W,J=this.#H(Z,Q);if(J instanceof B)return this.#Z;else{let[K,G]=this.#K(this.#W,J[0]);return this.#X(G),this.#W=K,this.#J(this.#W)}}case yQ:{let{path:Z,name:Q,event:J}=W,[K,G]=YQ(this.#G,Z,Q,J);if(this.#G=K,G instanceof B)return this.#Z;else{let[X,V]=this.#K(this.#W,G[0].message);return this.#X(V),this.#W=X,this.#J(this.#W)}}case u6:{let{key:Z,value:Q}=W,J=tW(this.#Q.contexts,Z);if(J instanceof B)return this.#Z;if(J=cW(Q,J[0]),J instanceof B)return this.#Z;let[K,G]=this.#K(this.#W,J[0]);return this.#X(G),this.#W=K,this.#J(this.#W)}}}#M(W,Z){let Q=tW(this.#Q.attributes,W);switch(Q.constructor){case A:return Q[0](Z);case B:return new B(void 0)}}#H(W,Z){let Q=tW(this.#Q.properties,W);switch(Q.constructor){case A:return Q[0](Z);case B:return new B(void 0)}}#X(W){let Z=(X)=>this.send(new JZ(X)),Q=(X,V)=>this.send(new zZ(X,V)),J=()=>{return},K=()=>{return},G=(X,V)=>this.send(new fQ(X,V));globalThis.queueMicrotask(()=>{T8(W,Z,Q,J,K,G)})}}class $K extends I{constructor(W,Z,Q,J){super();this.init=W,this.update=Z,this.view=Q,this.config=J}}class o6 extends I{constructor(W){super();this.selector=W}}class FQ extends I{}function M0(W,Z,Q){return new $K(W,Z,Q,hK(w))}function cK(W,Z,Q){return M0((G)=>{return[W(G),ZQ()]},(G,X)=>{return[Z(G,X),ZQ()]},Q)}function pK(W,Z,Q){return Q8(!UQ(),new B(new FQ),()=>{return mK(W,Z,Q)})}function e6(W){let Z=document.querySelector(W);if(!Z)return new B;return new A(Z)}function WJ(W){return W.innerText}class ZJ extends I{constructor(W,Z,Q,J,K,G,X,V,Y,H){super();this.name=W,this.city=Z,this.country=Q,this.languages=J,this.date=K,this.webpage=G,this.facebook=X,this.year_month=V,this.continent=Y,this.image=H}}class QJ extends I{constructor(W,Z){super();this.id=W,this.label=Z}}class JJ extends I{constructor(W){super();this.tab_id=W}}class SZ extends I{constructor(W,Z,Q){super();this.active_tab=W,this.festivals=Z,this.continents=Q}}function rK(){return WW("id",VW,(W)=>{return WW("label",VW,(Z)=>{return YZ(new QJ(W,Z))})})}function I0(){return WW("name",VW,(W)=>{return WW("city",VW,(Z)=>{return WW("country",VW,(Q)=>{return WW("languages",VW,(J)=>{return WW("date",VW,(K)=>{return WW("webpage",VW,(G)=>{return WW("facebook",VW,(X)=>{return WW("year_month",VW,(V)=>{return WW("continent",rK(),(Y)=>{return WW("image",VW,(H)=>{return YZ(new ZJ(W,Z,Q,J,K,G,X,V,Y,H))})})})})})})})})})})}function nK(){return WW("active_tab",VW,(W)=>{return WW("festivals",oZ(I0()),(Z)=>{return WW("continents",oZ(rK()),(Q)=>{return YZ(new SZ(W,Z,Q))})})})}function z0(W){if(W==="input")return!0;else if(W==="change")return!0;else if(W==="focus")return!0;else if(W==="focusin")return!0;else if(W==="focusout")return!0;else if(W==="blur")return!0;else if(W==="select")return!0;else return!1}function D0(W,Z){return I8(W,aZ(Z,(Q)=>{return new WQ(!1,!1,Q)}),w,R6,R6,z0(W),0,0)}function aK(W){return D0("click",YZ(W))}var oK="http://www.w3.org/2000/svg";function tK(W,Z){return LQ(oK,"svg",W,Z)}function eK(W){return LQ(oK,"path",W,w)}var O0="src/icons.gleam";class mZ extends I{constructor(W,Z){super();this.path=W,this.viewbox=Z}}function T0(){return M([["calendar",new mZ("M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Z","0 0 256 256")],["pin",new mZ("M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z","0 0 256 256")],["translate",new mZ("M247.15,212.42l-56-112a8,8,0,0,0-14.31,0l-21.71,43.43A88,88,0,0,1,108,126.93,103.65,103.65,0,0,0,135.69,64H160a8,8,0,0,0,0-16H104V32a8,8,0,0,0-16,0V48H32a8,8,0,0,0,0,16h87.63A87.76,87.76,0,0,1,96,116.35a87.74,87.74,0,0,1-19-31,8,8,0,1,0-15.08,5.34A103.63,103.63,0,0,0,84,127a87.55,87.55,0,0,1-52,17,8,8,0,0,0,0,16,103.46,103.46,0,0,0,64-22.08,104.18,104.18,0,0,0,51.44,21.31l-26.6,53.19a8,8,0,0,0,14.31,7.16L148.94,192h70.11l13.79,27.58A8,8,0,0,0,240,224a8,8,0,0,0,7.15-11.58ZM156.94,176,184,121.89,211.05,176Z","0 0 256 256")],["facebook-logo",new mZ("M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z","0 0 256 256")],["globe",new mZ("M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z","0 0 256 256")]])}function B0(W,Z){let Q=hQ(Z,16),J=BJ(T0(),W),K;if(J instanceof A)K=J[0];else throw aW("let_assert",O0,"icons",24,"create_icon","Pattern match failed, no pattern matched the value.",{value:J,start:543,end:598,pattern_start:554,pattern_end:562});return tK(M([D8(Q),S8(Q),ZW("viewBox",K.viewbox),ZW("fill","currentColor"),h("flex-shrink-0")]),M([eK(M([ZW("d",K.path)]))]))}function $Z(W){return B0(W,new MW)}function W9(W){return aJ((()=>{let Q=Q6(W,"-");return AJ(Q)})(),"")}function j0(W){let Z=YW(M([h("flex align-items-center mb-2 info-row")]),M([$Z("facebook-logo"),hZ(M([h("ml-2"),xZ(W.facebook),kZ("_blank"),EZ(W.name+" facebook page")]),M([n("Facebook page")]))])),Q=YW(M([]),M([])),J=CZ(W.facebook,"facebook.com");if(!CZ(W.facebook,"fb.com")&&!J)return Q;else return Z}function C0(W){return YW(M([h("grid-item")]),M([YW(M([h("p-4 card")]),M([YW(M([h("flex align-items-center justify-content-between mb-4 gap-3 date-img")]),M([YW(M([h("flex align-items-center gap-2 date flex-grow-1 flex-shrink-0")]),M([$Z("calendar"),wQ(M([]),M([n(W.date),n((()=>{if(lJ(W9(W.year_month)))return"";else return", "+W9(W.year_month)})())]))])),a8(M([h("festival-image flex-shrink-1"),z8(W.image)]))])),s8(M([h("mt-1 mb-3")]),M([n(W.name)])),YW(M([h("flex align-items-center mb-2 info-row")]),M([$Z("translate"),wQ(M([h("ml-2")]),M([n(W.languages)]))])),j0(W),YW(M([h("flex align-items-center mb-4 info-row")]),M([$Z("globe"),hZ(M([h("ml-2"),xZ(W.webpage),kZ("_blank"),EZ(W.name+" website")]),M([n(W.webpage)]))])),YW(M([h("flex align-items-center justify-content-end")]),M([YW(M([h("flex align-items-center px-3 py-2 pill location")]),M([$Z("pin"),wQ(M([h("ml-1")]),M([n(W.city+", "+W.country)]))]))]))]))]))}function L0(W,Z){let Q=OJ(Z,(K)=>{return K.continent.id===W.id});if(SJ(Q))return M([L6(M([h("text-center")]),M([n("No festivals found in this location or category.")]))]);else return M([YW(M([h("gap-3 gap-lg-4 px-2 px-lg-4 grid m-auto")]),BW(Q,C0))])}function w0(W,Z){let Q;if(Z.active_tab===W.id)Q="active";else Q="";return YW(M([h("tab-content "+Q),N8(W.id+"-content"),I6("content-continent",W.id)]),L0(W,Z.festivals))}function E0(){return p8(M([h("text-center mb-4 mb-lg-5 pt-3 px-2")]),M([d8(M([]),M([n("Improv Festivals Worldwide")])),L6(M([]),M([i8(M([]),M([n("Improvisers are awesome.")])),w6(M([])),n("They maintain a "),hZ(M([xZ("https://docs.google.com/spreadsheets/d/1uIyvbpZsPtWmJZJwSlAEG22A8qcozKmK9WuxRYSIOSY/edit"),kZ("_blank"),EZ("Improv Festivals Worlwide Google Sheet")]),M([n("shareable spreadsheet")])),n(" of most improv festivals in the world."),w6(M([])),n("This "),hZ(M([xZ("https://github.com/MissFahrenheit/improv-festivals-worldwide"),kZ("_blank"),EZ("Improv Festivals Worldwide Project Github page")]),M([n("open-source project")])),n(" ✨magically✨ turns that spreadsheet into a website (refreshes hourly).")]))]))}function x0(){return c8(M([h("text-center pb-1")]),M([n8(M([]),M([n("This is an open-source project. Find it on "),hZ(M([xZ("https://github.com/MissFahrenheit/improv-festivals-worldwide"),kZ("_blank"),EZ("Improv Festivals Worldwide Project Github page")]),M([n("GitHub")])),n(", fork it, go wild.")]))]))}function Z9(W,Z){let J=Q6(W,Z),K=BW(J,J6);return zQ(K,Z)}function k0(W,Z){let Q;if(Z.active_tab===W.id)Q="active";else Q="";return o8(M([h("py-2 px-3 pill tab "+Q),A8("button"),I6("continent",W.id),aK(new JJ(W.id))]),M([n((()=>{if(CZ(W.label,"/"))return Z9(W.label,"/");else if(CZ(W.label," "))return Z9(W.label," ");else return J6(W.label)})())]))}function y0(W){return YW(M([h("flex align-items-center justify-content-center px-2 px-lg-4 mb-4")]),M([r8(M([h("flex flex-wrap justify-content-center align-items-center py-2 gap-2 px-lg-3")]),BW(W.continents,(Z)=>{return k0(Z,W)}))]))}function Q9(W){return YW(M([]),M([E0(),l8(M([]),M([y0(W),YW(M([h("pt-3 pt-lg-4 pb-5")]),BW(W.continents,(Z)=>{return w0(Z,W)}))])),x0()]))}var GJ="src/front.gleam";function g0(W){return new SZ("europe",W[0],W[1])}function f0(W,Z){return new SZ(Z,W.festivals,W.continents)}function v0(W,Z){let Q=Z.tab_id;return f0(W,Q)}function J9(){let W,Z=e6("#model");W=K6(Z,WJ);let Q=W,J;if(Q instanceof A)J=Q[0];else throw aW("let_assert",GJ,"front",11,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:240,end:344,pattern_start:251,pattern_end:259});let K=eJ(J,nK()),G;if(K instanceof A)G=K[0];else throw aW("let_assert",GJ,"front",15,"main","Pattern match failed, no pattern matched the value.",{value:K,start:348,end:420,pattern_start:359,pattern_end:368});let X=cK(g0,v0,Q9),V=pK(X,"#app",[G.festivals,G.continents]);if(!(V instanceof A))throw aW("let_assert",GJ,"front",18,"main","Pattern match failed, no pattern matched the value.",{value:V,start:485,end:571,pattern_start:496,pattern_end:501});return V}J9();

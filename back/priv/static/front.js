class z{withFields(W){let Z=Object.keys(this).map((Q)=>(Q in W)?W[Q]:this[Q]);return new this.constructor(...Z)}}class QW{static fromArray(W,Z){let Q=Z||new I;for(let J=W.length-1;J>=0;--J)Q=new TW(W[J],Q);return Q}[Symbol.iterator](){return new M8(this)}toArray(){return[...this]}atLeastLength(W){let Z=this;while(W-- >0&&Z)Z=Z.tail;return Z!==void 0}hasLength(W){let Z=this;while(W-- >0&&Z)Z=Z.tail;return W===-1&&Z instanceof I}countLength(){let W=this,Z=0;while(W)W=W.tail,Z++;return Z-1}}function U(W,Z){return new TW(W,Z)}function F(W,Z){return QW.fromArray(W,Z)}class M8{#W;constructor(W){this.#W=W}next(){if(this.#W instanceof I)return{done:!0};else{let{head:W,tail:Z}=this.#W;return this.#W=Z,{value:W,done:!1}}}}class I extends QW{}class TW extends QW{constructor(W,Z){super();this.head=W,this.tail=Z}}class dZ{bitSize;byteSize;bitOffset;rawBuffer;constructor(W,Z,Q){if(!(W instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Z??W.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=Q??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(W.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=W}byteAt(W){if(W<0||W>=this.byteSize)return;return pZ(this.rawBuffer,this.bitOffset,W)}equals(W){if(this.bitSize!==W.bitSize)return!1;let Z=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&W.bitOffset===0){for(let J=0;J<Z;J++)if(this.rawBuffer[J]!==W.rawBuffer[J])return!1;let Q=this.bitSize%8;if(Q){let J=8-Q;if(this.rawBuffer[Z]>>J!==W.rawBuffer[Z]>>J)return!1}}else{for(let J=0;J<Z;J++){let K=pZ(this.rawBuffer,this.bitOffset,J),X=pZ(W.rawBuffer,W.bitOffset,J);if(K!==X)return!1}let Q=this.bitSize%8;if(Q){let J=pZ(this.rawBuffer,this.bitOffset,Z),K=pZ(W.rawBuffer,W.bitOffset,Z),X=8-Q;if(J>>X!==K>>X)return!1}}return!0}get buffer(){if(V8("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(V8("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function pZ(W,Z,Q){if(Z===0)return W[Q]??0;else{let J=W[Q]<<Z&255,K=W[Q+1]>>8-Z;return J|K}}class h6{constructor(W){this.value=W}}var Y8={};function V8(W,Z){if(Y8[W])return;console.warn(`Deprecated BitArray.${W} property used in JavaScript FFI code. ${Z}.`),Y8[W]=!0}class jZ extends z{static isResult(W){return W instanceof jZ}}class T extends jZ{constructor(W){super();this[0]=W}isOk(){return!0}}class S extends jZ{constructor(W){super();this[0]=W}isOk(){return!1}}function o(W,Z){let Q=[W,Z];while(Q.length){let J=Q.pop(),K=Q.pop();if(J===K)continue;if(!F8(J)||!F8(K))return!1;if(!UK(J,K)||GK(J,K)||YK(J,K)||VK(J,K)||FK(J,K)||MK(J,K)||HK(J,K))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(K))continue;else return!1}catch{}let[Y,V]=XK(J),M=Y(J),H=Y(K);if(M.length!==H.length)return!1;for(let R of M)Q.push(V(J,R),V(K,R))}return!0}function XK(W){if(W instanceof Map)return[(Z)=>Z.keys(),(Z,Q)=>Z.get(Q)];else{let Z=W instanceof globalThis.Error?["message"]:[];return[(Q)=>[...Z,...Object.keys(Q)],(Q,J)=>Q[J]]}}function GK(W,Z){return W instanceof Date&&(W>Z||W<Z)}function YK(W,Z){return!(W instanceof dZ)&&W.buffer instanceof ArrayBuffer&&W.BYTES_PER_ELEMENT&&!(W.byteLength===Z.byteLength&&W.every((Q,J)=>Q===Z[J]))}function VK(W,Z){return Array.isArray(W)&&W.length!==Z.length}function FK(W,Z){return W instanceof Map&&W.size!==Z.size}function MK(W,Z){return W instanceof Set&&(W.size!=Z.size||[...W].some((Q)=>!Z.has(Q)))}function HK(W,Z){return W instanceof RegExp&&(W.source!==Z.source||W.flags!==Z.flags)}function F8(W){return typeof W==="object"&&W!==null}function UK(W,Z){if(typeof W!=="object"&&typeof Z!=="object"&&(!W||!Z))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>W instanceof J))return!1;return W.constructor===Z.constructor}function aW(W,Z,Q,J,K,X,G){let Y=new globalThis.Error(X);Y.gleam_error=W,Y.file=Z,Y.module=Q,Y.line=J,Y.function=K,Y.fn=K;for(let V in G)Y[V]=G[V];return Y}class t extends z{}class e extends z{}class oW extends z{}class JW extends z{constructor(W){super();this[0]=W}}class FW extends z{}function _6(W,Z){if(W instanceof JW)return W[0];else return Z}var H8=new WeakMap,v6=new DataView(new ArrayBuffer(8)),$6=0;function m6(W){let Z=H8.get(W);if(Z!==void 0)return Z;let Q=$6++;if($6===2147483647)$6=0;return H8.set(W,Q),Q}function u6(W,Z){return W^Z+2654435769+(W<<6)+(W>>2)|0}function p6(W){let Z=0,Q=W.length;for(let J=0;J<Q;J++)Z=Math.imul(31,Z)+W.charCodeAt(J)|0;return Z}function q8(W){v6.setFloat64(0,W);let Z=v6.getInt32(0),Q=v6.getInt32(4);return Math.imul(73244475,Z>>16^Z)^Q}function qK(W){return p6(W.toString())}function RK(W){let Z=Object.getPrototypeOf(W);if(Z!==null&&typeof Z.hashCode==="function")try{let J=W.hashCode(W);if(typeof J==="number")return J}catch{}if(W instanceof Promise||W instanceof WeakSet||W instanceof WeakMap)return m6(W);if(W instanceof Date)return q8(W.getTime());let Q=0;if(W instanceof ArrayBuffer)W=new Uint8Array(W);if(Array.isArray(W)||W instanceof Uint8Array)for(let J=0;J<W.length;J++)Q=Math.imul(31,Q)+AW(W[J])|0;else if(W instanceof Set)W.forEach((J)=>{Q=Q+AW(J)|0});else if(W instanceof Map)W.forEach((J,K)=>{Q=Q+u6(AW(J),AW(K))|0});else{let J=Object.keys(W);for(let K=0;K<J.length;K++){let X=J[K],G=W[X];Q=Q+u6(AW(G),p6(X))|0}}return Q}function AW(W){if(W===null)return 1108378658;if(W===void 0)return 1108378659;if(W===!0)return 1108378657;if(W===!1)return 1108378656;switch(typeof W){case"number":return q8(W);case"string":return p6(W);case"bigint":return qK(W);case"object":return RK(W);case"symbol":return m6(W);case"function":return m6(W);default:return 0}}var bW=5,d6=Math.pow(2,bW),zK=d6-1,IK=d6/2,NK=d6/4,HW=0,yW=1,NW=2,YZ=3,s6={type:NW,bitmap:0,array:[]};function sZ(W,Z){return W>>>Z&zK}function q6(W,Z){return 1<<sZ(W,Z)}function DK(W){return W-=W>>1&1431655765,W=(W&858993459)+(W>>2&858993459),W=W+(W>>4)&252645135,W+=W>>8,W+=W>>16,W&127}function r6(W,Z){return DK(W&Z-1)}function jW(W,Z,Q){let J=W.length,K=Array(J);for(let X=0;X<J;++X)K[X]=W[X];return K[Z]=Q,K}function OK(W,Z,Q){let J=W.length,K=Array(J+1),X=0,G=0;while(X<Z)K[G++]=W[X++];K[G++]=Q;while(X<J)K[G++]=W[X++];return K}function c6(W,Z){let Q=W.length,J=Array(Q-1),K=0,X=0;while(K<Z)J[X++]=W[K++];++K;while(K<Q)J[X++]=W[K++];return J}function R8(W,Z,Q,J,K,X){let G=AW(Z);if(G===J)return{type:YZ,hash:G,array:[{type:HW,k:Z,v:Q},{type:HW,k:K,v:X}]};let Y={val:!1};return rZ(i6(s6,W,G,Z,Q,Y),W,J,K,X,Y)}function rZ(W,Z,Q,J,K,X){switch(W.type){case yW:return TK(W,Z,Q,J,K,X);case NW:return i6(W,Z,Q,J,K,X);case YZ:return AK(W,Z,Q,J,K,X)}}function TK(W,Z,Q,J,K,X){let G=sZ(Q,Z),Y=W.array[G];if(Y===void 0)return X.val=!0,{type:yW,size:W.size+1,array:jW(W.array,G,{type:HW,k:J,v:K})};if(Y.type===HW){if(o(J,Y.k)){if(K===Y.v)return W;return{type:yW,size:W.size,array:jW(W.array,G,{type:HW,k:J,v:K})}}return X.val=!0,{type:yW,size:W.size,array:jW(W.array,G,R8(Z+bW,Y.k,Y.v,Q,J,K))}}let V=rZ(Y,Z+bW,Q,J,K,X);if(V===Y)return W;return{type:yW,size:W.size,array:jW(W.array,G,V)}}function i6(W,Z,Q,J,K,X){let G=q6(Q,Z),Y=r6(W.bitmap,G);if((W.bitmap&G)!==0){let V=W.array[Y];if(V.type!==HW){let H=rZ(V,Z+bW,Q,J,K,X);if(H===V)return W;return{type:NW,bitmap:W.bitmap,array:jW(W.array,Y,H)}}let M=V.k;if(o(J,M)){if(K===V.v)return W;return{type:NW,bitmap:W.bitmap,array:jW(W.array,Y,{type:HW,k:J,v:K})}}return X.val=!0,{type:NW,bitmap:W.bitmap,array:jW(W.array,Y,R8(Z+bW,M,V.v,Q,J,K))}}else{let V=W.array.length;if(V>=IK){let M=Array(32),H=sZ(Q,Z);M[H]=i6(s6,Z+bW,Q,J,K,X);let R=0,N=W.bitmap;for(let j=0;j<32;j++){if((N&1)!==0){let A=W.array[R++];M[j]=A}N=N>>>1}return{type:yW,size:V+1,array:M}}else{let M=OK(W.array,Y,{type:HW,k:J,v:K});return X.val=!0,{type:NW,bitmap:W.bitmap|G,array:M}}}}function AK(W,Z,Q,J,K,X){if(Q===W.hash){let G=n6(W,J);if(G!==-1){if(W.array[G].v===K)return W;return{type:YZ,hash:Q,array:jW(W.array,G,{type:HW,k:J,v:K})}}let Y=W.array.length;return X.val=!0,{type:YZ,hash:Q,array:jW(W.array,Y,{type:HW,k:J,v:K})}}return rZ({type:NW,bitmap:q6(W.hash,Z),array:[W]},Z,Q,J,K,X)}function n6(W,Z){let Q=W.array.length;for(let J=0;J<Q;J++)if(o(Z,W.array[J].k))return J;return-1}function U6(W,Z,Q,J){switch(W.type){case yW:return jK(W,Z,Q,J);case NW:return SK(W,Z,Q,J);case YZ:return BK(W,J)}}function jK(W,Z,Q,J){let K=sZ(Q,Z),X=W.array[K];if(X===void 0)return;if(X.type!==HW)return U6(X,Z+bW,Q,J);if(o(J,X.k))return X;return}function SK(W,Z,Q,J){let K=q6(Q,Z);if((W.bitmap&K)===0)return;let X=r6(W.bitmap,K),G=W.array[X];if(G.type!==HW)return U6(G,Z+bW,Q,J);if(o(J,G.k))return G;return}function BK(W,Z){let Q=n6(W,Z);if(Q<0)return;return W.array[Q]}function l6(W,Z,Q,J){switch(W.type){case yW:return PK(W,Z,Q,J);case NW:return LK(W,Z,Q,J);case YZ:return CK(W,J)}}function PK(W,Z,Q,J){let K=sZ(Q,Z),X=W.array[K];if(X===void 0)return W;let G=void 0;if(X.type===HW){if(!o(X.k,J))return W}else if(G=l6(X,Z+bW,Q,J),G===X)return W;if(G===void 0){if(W.size<=NK){let Y=W.array,V=Array(W.size-1),M=0,H=0,R=0;while(M<K){let N=Y[M];if(N!==void 0)V[H]=N,R|=1<<M,++H;++M}++M;while(M<Y.length){let N=Y[M];if(N!==void 0)V[H]=N,R|=1<<M,++H;++M}return{type:NW,bitmap:R,array:V}}return{type:yW,size:W.size-1,array:jW(W.array,K,G)}}return{type:yW,size:W.size,array:jW(W.array,K,G)}}function LK(W,Z,Q,J){let K=q6(Q,Z);if((W.bitmap&K)===0)return W;let X=r6(W.bitmap,K),G=W.array[X];if(G.type!==HW){let Y=l6(G,Z+bW,Q,J);if(Y===G)return W;if(Y!==void 0)return{type:NW,bitmap:W.bitmap,array:jW(W.array,X,Y)};if(W.bitmap===K)return;return{type:NW,bitmap:W.bitmap^K,array:c6(W.array,X)}}if(o(J,G.k)){if(W.bitmap===K)return;return{type:NW,bitmap:W.bitmap^K,array:c6(W.array,X)}}return W}function CK(W,Z){let Q=n6(W,Z);if(Q<0)return W;if(W.array.length===1)return;return{type:YZ,hash:W.hash,array:c6(W.array,Q)}}function z8(W,Z){if(W===void 0)return;let Q=W.array,J=Q.length;for(let K=0;K<J;K++){let X=Q[K];if(X===void 0)continue;if(X.type===HW){Z(X.v,X.k);continue}z8(X,Z)}}class MW{static fromObject(W){let Z=Object.keys(W),Q=MW.new();for(let J=0;J<Z.length;J++){let K=Z[J];Q=Q.set(K,W[K])}return Q}static fromMap(W){let Z=MW.new();return W.forEach((Q,J)=>{Z=Z.set(J,Q)}),Z}static new(){return new MW(void 0,0)}constructor(W,Z){this.root=W,this.size=Z}get(W,Z){if(this.root===void 0)return Z;let Q=U6(this.root,0,AW(W),W);if(Q===void 0)return Z;return Q.v}set(W,Z){let Q={val:!1},J=this.root===void 0?s6:this.root,K=rZ(J,0,AW(W),W,Z,Q);if(K===this.root)return this;return new MW(K,Q.val?this.size+1:this.size)}delete(W){if(this.root===void 0)return this;let Z=l6(this.root,0,AW(W),W);if(Z===this.root)return this;if(Z===void 0)return MW.new();return new MW(Z,this.size-1)}has(W){if(this.root===void 0)return!1;return U6(this.root,0,AW(W),W)!==void 0}entries(){if(this.root===void 0)return[];let W=[];return this.forEach((Z,Q)=>W.push([Q,Z])),W}forEach(W){z8(this.root,W)}hashCode(){let W=0;return this.forEach((Z,Q)=>{W=W+u6(AW(Z),AW(Q))|0}),W}equals(W){if(!(W instanceof MW)||this.size!==W.size)return!1;try{return this.forEach((Z,Q)=>{if(!o(W.get(Q,!Z),Z))throw U8}),!0}catch(Z){if(Z===U8)return!1;throw Z}}}var U8=Symbol();function iZ(W,Z,Q){return D8(Z,Q,W)}function wK(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return J;else{let K=Q.head;W=Q.tail,Z=U(K,J)}}}function EK(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return wK(J,F([]));else{let K=Q.tail,X=Q.head[0];W=K,Z=U(X,J)}}}function nZ(W){return EK(N8(W),F([]))}class KW extends z{}class BZ extends z{}function lZ(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return J;else{let K=Q.head;W=Q.tail,Z=U(K,J)}}}function p(W){return lZ(W,F([]))}function O8(W){return o(W,F([]))}function T8(W){if(W instanceof I)return new S(void 0);else{let Z=W.head;return new T(Z)}}function yK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return p(X);else{let{head:G,tail:Y}=J,V;if(K(G))V=U(G,X);else V=X;let H=V;W=Y,Z=K,Q=H}}}function A8(W,Z){return yK(W,Z,F([]))}function bK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return p(X);else{let G=J.head;W=J.tail,Z=K,Q=U(K(G),X)}}}function SW(W,Z){return bK(W,Z,F([]))}function gK(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return J;else{let K=Q.head;W=Q.tail,Z=U(K,J)}}}function aZ(W,Z){return gK(p(W),Z)}function R6(W,Z){return U(Z,W)}function qW(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return K;else{let G=J.head;W=J.tail,Z=X(K,G),Q=X}}}function fK(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return new S(void 0);else{let{head:K,tail:X}=Q,G=J(K);if(G instanceof T)return G;else W=X,Z=J}}}function hK(W,Z,Q,J,K,X){while(!0){let G=W,Y=Z,V=Q,M=J,H=K,R=X,N=U(H,V);if(G instanceof I)if(M instanceof KW)return U(p(N),R);else return U(N,R);else{let{head:j,tail:A}=G,C=Y(H,j);if(M instanceof KW)if(C instanceof t)W=A,Z=Y,Q=N,J=M,K=j,X=R;else if(C instanceof e)W=A,Z=Y,Q=N,J=M,K=j,X=R;else{let D;if(M instanceof KW)D=U(p(N),R);else D=U(N,R);let E=D;if(A instanceof I)return U(F([j]),E);else{let{head:O,tail:P}=A,x,q=Y(j,O);if(q instanceof t)x=new KW;else if(q instanceof e)x=new KW;else x=new BZ;let B=x;W=P,Z=Y,Q=F([j]),J=B,K=O,X=E}}else if(C instanceof t){let D;if(M instanceof KW)D=U(p(N),R);else D=U(N,R);let E=D;if(A instanceof I)return U(F([j]),E);else{let{head:O,tail:P}=A,x,q=Y(j,O);if(q instanceof t)x=new KW;else if(q instanceof e)x=new KW;else x=new BZ;let B=x;W=P,Z=Y,Q=F([j]),J=B,K=O,X=E}}else if(C instanceof e){let D;if(M instanceof KW)D=U(p(N),R);else D=U(N,R);let E=D;if(A instanceof I)return U(F([j]),E);else{let{head:O,tail:P}=A,x,q=Y(j,O);if(q instanceof t)x=new KW;else if(q instanceof e)x=new KW;else x=new BZ;let B=x;W=P,Z=Y,Q=F([j]),J=B,K=O,X=E}}else W=A,Z=Y,Q=N,J=M,K=j,X=R}}}function _K(W,Z,Q,J){while(!0){let K=W,X=Z,G=Q,Y=J;if(K instanceof I)return lZ(X,Y);else if(X instanceof I)return lZ(K,Y);else{let{head:V,tail:M}=K,H=X.head,R=X.tail,N=G(V,H);if(N instanceof t)W=M,Z=X,Q=G,J=U(V,Y);else if(N instanceof e)W=K,Z=R,Q=G,J=U(H,Y);else W=K,Z=R,Q=G,J=U(H,Y)}}}function vK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return p(X);else{let G=J.tail;if(G instanceof I){let Y=J.head;return p(U(p(Y),X))}else{let Y=J.head,V=G.head,M=G.tail,H=_K(Y,V,K,F([]));W=M,Z=K,Q=U(H,X)}}}}function $K(W,Z,Q,J){while(!0){let K=W,X=Z,G=Q,Y=J;if(K instanceof I)return lZ(X,Y);else if(X instanceof I)return lZ(K,Y);else{let{head:V,tail:M}=K,H=X.head,R=X.tail,N=G(V,H);if(N instanceof t)W=K,Z=R,Q=G,J=U(H,Y);else if(N instanceof e)W=M,Z=X,Q=G,J=U(V,Y);else W=M,Z=X,Q=G,J=U(V,Y)}}}function mK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return p(X);else{let G=J.tail;if(G instanceof I){let Y=J.head;return p(U(p(Y),X))}else{let Y=J.head,V=G.head,M=G.tail,H=$K(Y,V,K,F([]));W=M,Z=K,Q=U(H,X)}}}}function uK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return J;else if(K instanceof KW)if(J.tail instanceof I)return J.head;else W=vK(J,X,F([])),Z=new BZ,Q=X;else if(J.tail instanceof I){let Y=J.head;return p(Y)}else W=mK(J,X,F([])),Z=new KW,Q=X}}function j8(W,Z){if(W instanceof I)return W;else{let Q=W.tail;if(Q instanceof I)return W;else{let J=W.head,K=Q.head,X=Q.tail,G,Y=Z(J,K);if(Y instanceof t)G=new KW;else if(Y instanceof e)G=new KW;else G=new BZ;let V=G,M=hK(X,Z,F([J]),V,K,F([]));return uK(M,new KW,Z)}}}function S8(W,Z){return fK(W,(Q)=>{let J,K;if(J=Q[0],K=Q[1],o(J,Z))return new T(K);else return new S(void 0)})}function B8(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return;else{let{head:K,tail:X}=Q;J(K),W=X,Z=J}}}class uW extends z{constructor(W,Z,Q){super();this.expected=W,this.found=Z,this.path=Q}}class eW extends z{constructor(W){super();this.function=W}}function cW(W,Z){let Q=Z.function(W),J,K;if(J=Q[0],K=Q[1],K instanceof I)return new T(J);else return new S(K)}function VZ(W){return new eW((Z)=>{return[W,F([])]})}function oZ(W,Z){return new eW((Q)=>{let J=W.function(Q),K,X;return K=J[0],X=J[1],[Z(K),X]})}function dK(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(X instanceof I)return K;else{let{head:G,tail:Y}=X,V=G.function(J),M,H;if(M=V,H=V[1],H instanceof I)return M;else W=J,Z=K,Q=Y}}}function E8(W,Z){return new eW((Q)=>{let J=W.function(Q),K,X;if(K=J,X=J[1],X instanceof I)return K;else return dK(Q,K,Z)})}function x8(W,Z,Q){let J=Q(W);if(J instanceof T)return[J[0],F([])];else return[J[0],F([new uW(Z,mW(W),F([]))])]}function sK(W){return x8(W,"Int",f8)}var k8=new eW(sK);function rK(W){return x8(W,"String",h8)}var YW=new eW(rK);function tZ(W){return new eW((Z)=>{return g8(Z,W.function,(Q,J)=>{return z6(Q,F([J]))},0,F([]))})}function z6(W,Z){let Q=E8(YW,F([(()=>{return oZ(k8,pW)})()])),J=SW(Z,(X)=>{let G=r(X),Y=cW(G,Q);if(Y instanceof T)return Y[0];else return"<"+mW(G)+">"}),K=SW(W[1],(X)=>{return new uW(X.expected,X.found,aZ(J,X.path))});return[W[0],K]}function iK(W,Z,Q,J,K){while(!0){let X=W,G=Z,Y=Q,V=J,M=K;if(X instanceof I){let R=Y(V);return z6(R,p(G))}else{let{head:H,tail:R}=X,N=b8(V,H);if(N instanceof T){let j=N[0];if(j instanceof JW){let A=j[0];W=R,Z=U(H,G),Q=Y,J=A,K=M}else return M(V,U(H,G))}else{let j=N[0],A=Y(V),C;C=A[0];let D=[C,F([new uW(j,mW(V),F([]))])];return z6(D,p(G))}}}}function y8(W,Z,Q){return new eW((J)=>{let K=iK(W,F([]),Z.function,J,(H,R)=>{let N=Z.function(H),j;j=N[0];let A=[j,F([new uW("Field","Nothing",F([]))])];return z6(A,p(R))}),X,G;X=K[0],G=K[1];let Y=Q(X).function(J),V,M;return V=Y[0],M=Y[1],[V,aZ(G,M)]})}function WW(W,Z,Q){return y8(F([W]),Z,Q)}var m8=void 0,v8={};function r(W){return W}function pW(W){return W.toString()}function a6(W){let Z=u8(W);if(Z)return QW.fromArray(Array.from(Z).map((Q)=>Q.segment));else return QW.fromArray(W.match(/./gsu))}var $8=void 0;function u8(W){if(globalThis.Intl&&Intl.Segmenter)return $8||=new Intl.Segmenter,$8.segment(W)[Symbol.iterator]()}function c8(W){let Z,Q=u8(W);if(Q)Z=Q.next().value?.segment;else Z=W.match(/./su)?.[0];if(Z)return new T([Z,W.slice(Z.length)]);else return new S(m8)}function o6(W){return W.toLowerCase()}function t6(W){return W.toUpperCase()}function e6(W,Z){return QW.fromArray(W.split(Z))}function LZ(W,Z){return W.indexOf(Z)>=0}function WQ(W,Z){return W.startsWith(Z)}var p8=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),O7=new RegExp(`^[${p8}]*`),T7=new RegExp(`[${p8}]*$`);function SZ(){return MW.new()}function N8(W){return QW.fromArray(W.entries())}function tW(W,Z){let Q=W.get(Z,v8);if(Q===v8)return new S(m8);return new T(Q)}function D8(W,Z,Q){return Q.set(W,Z)}function mW(W){if(typeof W==="string")return"String";else if(typeof W==="boolean")return"Bool";else if(W instanceof jZ)return"Result";else if(W instanceof QW)return"List";else if(W instanceof dZ)return"BitArray";else if(W instanceof MW)return"Dict";else if(Number.isInteger(W))return"Int";else if(Array.isArray(W))return"Array";else if(typeof W==="number")return"Float";else if(W===null)return"Nil";else if(W===void 0)return"Nil";else{let Z=typeof W;return Z.charAt(0).toUpperCase()+Z.slice(1)}}function d8(W){let Z=W.toString().replace("+","");if(Z.indexOf(".")>=0)return Z;else{let Q=Z.indexOf("e");if(Q>=0)return Z.slice(0,Q)+".0"+Z.slice(Q);else return Z+".0"}}class lK{#W=new Set;inspect(W){let Z=typeof W;if(W===!0)return"True";if(W===!1)return"False";if(W===null)return"//js(null)";if(W===void 0)return"Nil";if(Z==="string")return this.#X(W);if(Z==="bigint"||Number.isInteger(W))return W.toString();if(Z==="number")return d8(W);if(W instanceof h6)return this.#Y(W);if(W instanceof dZ)return this.#V(W);if(W instanceof RegExp)return`//js(${W})`;if(W instanceof Date)return`//js(Date("${W.toISOString()}"))`;if(W instanceof globalThis.Error)return`//js(${W.toString()})`;if(W instanceof Function){let J=[];for(let K of Array(W.length).keys())J.push(String.fromCharCode(K+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#W.size===this.#W.add(W).size)return"//js(circular reference)";let Q;if(Array.isArray(W))Q=`#(${W.map((J)=>this.inspect(J)).join(", ")})`;else if(W instanceof QW)Q=this.#Z(W);else if(W instanceof z)Q=this.#Q(W);else if(W instanceof MW)Q=this.#J(W);else if(W instanceof Set)return`//js(Set(${[...W].map((J)=>this.inspect(J)).join(", ")}))`;else Q=this.#K(W);return this.#W.delete(W),Q}#K(W){let Z=Object.getPrototypeOf(W)?.constructor?.name||"Object",Q=[];for(let X of Object.keys(W))Q.push(`${this.inspect(X)}: ${this.inspect(W[X])}`);let J=Q.length?" "+Q.join(", ")+" ":"";return`//js(${Z==="Object"?"":Z+" "}{${J}})`}#J(W){let Z="dict.from_list([",Q=!0;return W.forEach((J,K)=>{if(!Q)Z=Z+", ";Z=Z+"#("+this.inspect(K)+", "+this.inspect(J)+")",Q=!1}),Z+"])"}#Q(W){let Z=Object.keys(W).map((Q)=>{let J=this.inspect(W[Q]);return isNaN(parseInt(Q))?`${Q}: ${J}`:J}).join(", ");return Z?`${W.constructor.name}(${Z})`:W.constructor.name}#Z(W){if(W instanceof I)return"[]";let Z='charlist.from_string("',Q="[",J=W;while(J instanceof TW){let K=J.head;if(J=J.tail,Q!=="[")Q+=", ";if(Q+=this.inspect(K),Z)if(Number.isInteger(K)&&K>=32&&K<=126)Z+=String.fromCharCode(K);else Z=null}if(Z)return Z+'")';else return Q+"]"}#X(W){let Z='"';for(let Q=0;Q<W.length;Q++){let J=W[Q];switch(J){case`
`:Z+="\\n";break;case"\r":Z+="\\r";break;case"\t":Z+="\\t";break;case"\f":Z+="\\f";break;case"\\":Z+="\\\\";break;case'"':Z+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Z+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Z+=J}}return Z+='"',Z}#Y(W){return`//utfcodepoint(${String.fromCodePoint(W.value)})`}#V(W){if(W.bitSize===0)return"<<>>";let Z="<<";for(let Q=0;Q<W.byteSize-1;Q++)Z+=W.byteAt(Q).toString(),Z+=", ";if(W.byteSize*8===W.bitSize)Z+=W.byteAt(W.byteSize-1).toString();else{let Q=W.bitSize%8;Z+=W.byteAt(W.byteSize-1)>>8-Q,Z+=`:size(${Q})`}return Z+=">>",Z}}function b8(W,Z){if(W instanceof MW||W instanceof WeakMap||W instanceof Map){let J={},K=W.get(Z,J);if(K===J)return new T(new FW);return new T(new JW(K))}let Q=Number.isInteger(Z);if(Q&&Z>=0&&Z<8&&W instanceof QW){let J=0;for(let K of W){if(J===Z)return new T(new JW(K));J++}return new S("Indexable")}if(Q&&Array.isArray(W)||W&&typeof W==="object"||W&&Object.getPrototypeOf(W)===Object.prototype){if(Z in W)return new T(new JW(W[Z]));return new T(new FW)}return new S(Q?"Indexable":"Dict")}function g8(W,Z,Q,J,K){if(!(W instanceof QW||Array.isArray(W))){let G=new uW("List",mW(W),K);return[K,QW.fromArray([G])]}let X=[];for(let G of W){let Y=Z(G),[V,M]=Y;if(M instanceof TW){let[H,R]=Q(Y,J.toString());return[K,R]}X.push(V),J++}return[QW.fromArray(X),K]}function f8(W){if(Number.isInteger(W))return new T(W);return new S(0)}function h8(W){if(typeof W==="string")return new T(W);return new S("")}function r8(W){return W===""}function ZQ(W,Z){return W+Z}function W0(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return J;else{let K=Q.head;W=Q.tail,Z=J+K}}}function i8(W){return W0(W,"")}function Z0(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return X;else{let G=J.head;W=J.tail,Z=K,Q=X+K+G}}}function I6(W,Z){if(W instanceof I)return"";else{let{head:Q,tail:J}=W;return Z0(J,Z,Q)}}function QQ(W,Z){if(Z==="")return a6(W);else{let J=r(W),K=e6(J,Z);return SW(K,r)}}function JQ(W){let Z=c8(W);if(Z instanceof T){let Q=Z[0][0],J=Z[0][1];return ZQ(t6(Q),o6(J))}else return""}function KQ(W,Z){if(W instanceof T){let Q=W[0];return new T(Z(Q))}else return W}function n8(W,Z){if(W instanceof T)return W;else{let Q=W[0];return new S(Z(Q))}}function l8(W,Z){if(W instanceof T){let Q=W[0];return Z(Q)}else return W}function a8(W,Z){if(W instanceof T)return W[0];else return Z}function o8(W){try{let Z=JSON.parse(W);return new T(Z)}catch(Z){return new S(K0(Z,W))}}function K0(W,Z){if(X0(W))return new XQ;return G0(W,Z)}function X0(W){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(W.message)}function G0(W,Z){let Q=[Y0,V0,M0,F0];for(let J of Q){let K=J(W,Z);if(K)return K}return new FZ("",0)}function Y0(W){let Q=/unexpected token '(.)', ".+" is not valid JSON/i.exec(W.message);if(!Q)return null;let J=N6(Q[1]);return new FZ(J,-1)}function V0(W){let Q=/unexpected token (.) in JSON at position (\d+)/i.exec(W.message);if(!Q)return null;let J=N6(Q[1]),K=Number(Q[2]);return new FZ(J,K)}function F0(W,Z){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(W.message);if(!J)return null;let K=Number(J[2]),X=Number(J[3]),G=H0(K,X,Z),Y=N6(Z[G]);return new FZ(Y,G)}function M0(W){let Q=/unexpected (identifier|token) "(.)"/i.exec(W.message);if(!Q)return null;let J=N6(Q[2]);return new FZ(J,0)}function N6(W){return"0x"+W.charCodeAt(0).toString(16).toUpperCase()}function H0(W,Z,Q){if(W===1)return Z-1;let J=1,K=0;return Q.split("").find((X,G)=>{if(X===`
`)J+=1;if(J===W)return K=G+Z,!0;return!1}),K}class XQ extends z{}class FZ extends z{constructor(W){super();this[0]=W}}class t8 extends z{constructor(W){super();this[0]=W}}function q0(W,Z){return l8(o8(W),(Q)=>{let J=cW(Q,Z);return n8(J,(K)=>{return new t8(K)})})}function e8(W,Z){return q0(W,Z)}function QJ(W,Z,Q){if(W)return Z;else return Q()}function i(W){return W}var BW=()=>globalThis?.document,O6="http://www.w3.org/1999/xhtml",T6=1,YQ=3;var XJ=!!globalThis.HTMLElement?.prototype?.moveBefore;var w=F([]),A6=new FW;var O0=new oW,T0=new t,A0=new e;function j6(W,Z){if(W.name===Z.name)return A0;else if(W.name<Z.name)return T0;else return O0}class _W extends z{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class S6 extends z{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class zW extends z{constructor(W,Z,Q,J,K,X,G,Y,V){super();this.kind=W,this.name=Z,this.handler=Q,this.include=J,this.prevent_default=K,this.stop_propagation=X,this.immediate=G,this.debounce=Y,this.throttle=V}}class Z6 extends z{constructor(W,Z,Q){super();this.prevent_default=W,this.stop_propagation=Z,this.message=Q}}class HJ extends z{constructor(W){super();this.kind=W}}function C0(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof I)return J;else{let K=Q.head;if(K instanceof _W){let X=K.name;if(X==="")W=Q.tail,Z=J;else if(X==="class"){let G=K.value;if(G==="")W=Q.tail,Z=J;else{let Y=Q.tail;if(Y instanceof I){let V=K;W=Y,Z=U(V,J)}else{let V=Y.head;if(V instanceof _W)if(V.name==="class"){let H=K.kind,R=G,N=Y.tail,j=V.value,A=R+" "+j,C=new _W(H,"class",A);W=U(C,N),Z=J}else{let H=K;W=Y,Z=U(H,J)}else{let M=K;W=Y,Z=U(M,J)}}}}else if(X==="style"){let G=K.value;if(G==="")W=Q.tail,Z=J;else{let Y=Q.tail;if(Y instanceof I){let V=K;W=Y,Z=U(V,J)}else{let V=Y.head;if(V instanceof _W)if(V.name==="style"){let H=K.kind,R=G,N=Y.tail,j=V.value,A=R+";"+j,C=new _W(H,"style",A);W=U(C,N),Z=J}else{let H=K;W=Y,Z=U(H,J)}else{let M=K;W=Y,Z=U(M,J)}}}}else{let G=K;W=Q.tail,Z=U(G,J)}}else{let X=K;W=Q.tail,Z=U(X,J)}}}}function UJ(W){if(W instanceof I)return W;else if(W.tail instanceof I)return W;else{let J=j8(W,(K,X)=>{return j6(X,K)});return C0(J,w)}}var MQ=0;function qJ(W,Z){return new _W(MQ,W,Z)}var RJ=1;var HQ=2;function zJ(W,Z,Q,J,K,X,G,Y){return new zW(HQ,W,Z,Q,J,K,X,G,Y)}var UQ=0;var qQ=new HJ(UQ);var RQ=2;function ZW(W,Z){return qJ(W,Z)}function v(W){return ZW("class",W)}function zQ(W,Z){return ZW("data-"+W,Z)}function IJ(W){return ZW("id",W)}function EZ(W){return ZW("title",W)}function xZ(W){return ZW("href",W)}function kZ(W){return ZW("target",W)}function NJ(W){return ZW("src",W)}function DJ(W){return ZW("width",pW(W))}function OJ(W){return ZW("height",pW(W))}function TJ(W){return ZW("type",W)}class IQ extends z{constructor(W,Z,Q){super();this.synchronous=W,this.before_paint=Z,this.after_paint=Q}}class AJ extends z{constructor(W,Z,Q,J,K){super();this.dispatch=W,this.emit=Z,this.select=Q,this.root=J,this.provide=K}}function jJ(W,Z,Q,J,K,X){let G=new AJ(Z,Q,J,K,X);return B8(W.synchronous,(Y)=>{return Y(G)})}var SJ=new IQ(F([]),F([]),F([]));function Q6(){return SJ}function BJ(W){return qW(W,SJ,(Z,Q)=>{return new IQ(qW(Q.synchronous,Z.synchronous,R6),qW(Q.before_paint,Z.before_paint,R6),qW(Q.after_paint,Z.after_paint,R6))})}function IW(){return null}function K6(W,Z){let Q=W?.get(Z);if(Q!=null)return new T(Q);else return new S(void 0)}function X6(W,Z){return W&&W.has(Z)}function MZ(W,Z,Q){return W??=new Map,W.set(Z,Q),W}function NQ(W,Z){return W?.delete(Z),W}class DQ extends z{}class OQ extends z{constructor(W,Z){super();this.key=W,this.parent=Z}}class PJ extends z{constructor(W,Z){super();this.index=W,this.parent=Z}}function x0(W,Z){while(!0){let Q=W,J=Z;if(J instanceof I)return!1;else{let{head:K,tail:X}=J,G=WQ(Q,K);if(G)return G;else W=Q,Z=X}}}function LW(W,Z,Q){if(Q==="")return new PJ(Z,W);else return new OQ(Q,W)}var B6=new DQ,Y6="\t";function LJ(W,Z){while(!0){let Q=W,J=Z;if(Q instanceof DQ)if(J instanceof I)return"";else{let K=J.tail;return i8(K)}else if(Q instanceof OQ){let K=Q.key;W=Q.parent,Z=U(Y6,U(K,J))}else{let K=Q.index;W=Q.parent,Z=U(Y6,U(pW(K),J))}}}function k0(W){return LJ(W,F([]))}function CJ(W,Z){if(Z instanceof I)return!1;else return x0(k0(W),Z)}var TQ=`
`;function AQ(W,Z){return LJ(W,F([TQ,Z]))}class CW extends z{constructor(W,Z,Q,J,K){super();this.kind=W,this.key=Z,this.mapper=Q,this.children=J,this.keyed_children=K}}class wW extends z{constructor(W,Z,Q,J,K,X,G,Y,V,M){super();this.kind=W,this.key=Z,this.mapper=Q,this.namespace=J,this.tag=K,this.attributes=X,this.children=G,this.keyed_children=Y,this.self_closing=V,this.void=M}}class EW extends z{constructor(W,Z,Q,J){super();this.kind=W,this.key=Z,this.mapper=Q,this.content=J}}class yZ extends z{constructor(W,Z,Q,J,K,X,G){super();this.kind=W,this.key=Z,this.mapper=Q,this.namespace=J,this.tag=K,this.attributes=X,this.inner_html=G}}function g0(W,Z){if(Z==="")if(W==="area")return!0;else if(W==="base")return!0;else if(W==="br")return!0;else if(W==="col")return!0;else if(W==="embed")return!0;else if(W==="hr")return!0;else if(W==="img")return!0;else if(W==="input")return!0;else if(W==="link")return!0;else if(W==="meta")return!0;else if(W==="param")return!0;else if(W==="source")return!0;else if(W==="track")return!0;else if(W==="wbr")return!0;else return!1;else return!1}function EJ(W,Z){if(Z instanceof CW)return new CW(Z.kind,W,Z.mapper,Z.children,Z.keyed_children);else if(Z instanceof wW)return new wW(Z.kind,W,Z.mapper,Z.namespace,Z.tag,Z.attributes,Z.children,Z.keyed_children,Z.self_closing,Z.void);else if(Z instanceof EW)return new EW(Z.kind,W,Z.mapper,Z.content);else return new yZ(Z.kind,W,Z.mapper,Z.namespace,Z.tag,Z.attributes,Z.inner_html)}var xW=0;function jQ(W,Z,Q,J){return new CW(xW,W,Z,Q,J)}var HZ=1;function bZ(W,Z,Q,J,K,X,G,Y,V){return new wW(HZ,W,Z,Q,J,UJ(K),X,G,Y,V||g0(J,Q))}var gZ=2;function SQ(W,Z,Q){return new EW(gZ,W,Z,Q)}var xJ=3;var BQ=(W,Z)=>W===Z,qZ=(W,Z)=>{if(W===Z)return!0;if(W==null||Z==null)return!1;let Q=typeof W;if(Q!==typeof Z)return!1;if(Q!=="object")return!1;if(W.constructor!==Z.constructor)return!1;if(Array.isArray(W))return f0(W,Z);return h0(W,Z)},f0=(W,Z)=>{let Q=W.length;if(Q!==Z.length)return!1;while(Q--)if(!qZ(W[Q],Z[Q]))return!1;return!0},h0=(W,Z)=>{let Q=Object.keys(W),J=Q.length;if(Object.keys(Z).length!==J)return!1;while(J--){let K=Q[J];if(!Object.hasOwn(Z,K))return!1;if(!qZ(W[K],Z[K]))return!1}return!0};class dW extends z{constructor(W,Z,Q){super();this.handlers=W,this.dispatched_paths=Z,this.next_dispatched_paths=Q}}function LQ(){return new dW(IW(),w,w)}function gJ(W){return new dW(W.handlers,W.next_dispatched_paths,w)}function fJ(W,Z,Q){return NQ(W,AQ(Z,Q))}function P6(W,Z,Q){let J=fJ(W.handlers,Z,Q);return new dW(J,W.dispatched_paths,W.next_dispatched_paths)}function kJ(W,Z,Q){return qW(Q,W,(J,K)=>{if(K instanceof zW){let X=K.name;return fJ(J,Z,X)}else return J})}function V6(W,Z,Q,J){let K=U(Z,W.next_dispatched_paths),X=new dW(W.handlers,W.dispatched_paths,K),G=K6(X.handlers,Z+TQ+Q);if(G instanceof T){let Y=G[0];return[X,cW(J,Y)]}else return[X,new S(F([]))]}function L6(W,Z){return CJ(Z,W.dispatched_paths)}function hJ(W,Z,Q,J,K){return MZ(W,AQ(Q,J),oZ(K,(X)=>{return new Z6(X.prevent_default,X.stop_propagation,i(Z)(X.message))}))}function fZ(W,Z,Q,J,K){let X=hJ(W.handlers,Z,Q,J,K);return new dW(X,W.dispatched_paths,W.next_dispatched_paths)}function yJ(W,Z,Q,J){return qW(J,W,(K,X)=>{if(X instanceof zW){let{name:G,handler:Y}=X;return hJ(K,Z,Q,G,Y)}else return K})}function QZ(W,Z){let Q=BQ(W,i);if(BQ(Z,i))return W;else if(Q)return Z;else return(K)=>{return W(Z(K))}}function bJ(W,Z,Q,J){while(!0){let K=W,X=Z,G=Q,Y=J;if(Y instanceof I)return K;else{let{head:V,tail:M}=Y;W=_J(K,X,G,V),Z=X,Q=G+1,J=M}}}function _J(W,Z,Q,J){if(J instanceof CW){let K=J.children,X=LW(Z,Q,J.key);return bJ(W,X,0,K)}else if(J instanceof wW){let{attributes:K,children:X}=J,G=LW(Z,Q,J.key),V=kJ(W,G,K);return bJ(V,G,0,X)}else if(J instanceof EW)return W;else{let K=J.attributes,X=LW(Z,Q,J.key);return kJ(W,X,K)}}function sW(W,Z,Q,J){let K=_J(W.handlers,Z,Q,J);return new dW(K,W.dispatched_paths,W.next_dispatched_paths)}function PQ(W,Z,Q,J,K){while(!0){let X=W,G=Z,Y=Q,V=J,M=K;if(M instanceof I)return X;else{let{head:H,tail:R}=M;W=vJ(X,G,Y,V,H),Z=G,Q=Y,J=V+1,K=R}}}function vJ(W,Z,Q,J,K){if(K instanceof CW){let X=K.children,G=LW(Q,J,K.key),Y=QZ(Z,K.mapper);return PQ(W,Y,G,0,X)}else if(K instanceof wW){let{attributes:X,children:G}=K,Y=LW(Q,J,K.key),V=QZ(Z,K.mapper),H=yJ(W,V,Y,X);return PQ(H,V,Y,0,G)}else if(K instanceof EW)return W;else{let X=K.attributes,G=LW(Q,J,K.key),Y=QZ(Z,K.mapper);return yJ(W,Y,G,X)}}function rW(W,Z,Q,J,K){let X=vJ(W.handlers,Z,Q,J,K);return new dW(X,W.dispatched_paths,W.next_dispatched_paths)}function $J(W){return rW(LQ(),i,B6,0,W)}function mJ(W,Z,Q,J,K){let X=PQ(W.handlers,Z,Q,J,K);return new dW(X,W.dispatched_paths,W.next_dispatched_paths)}function XW(W,Z,Q){return bZ("",i,"",W,Z,Q,IW(),!1,!1)}function C6(W,Z,Q,J){return bZ("",i,W,Z,Q,J,IW(),!1,!1)}function _Z(W){return SQ("",i,W)}function uJ(){return SQ("",i,"")}function n(W){return _Z(W)}function cJ(W,Z){return XW("footer",W,Z)}function pJ(W,Z){return XW("header",W,Z)}function dJ(W,Z){return XW("h1",W,Z)}function sJ(W,Z){return XW("h2",W,Z)}function rJ(W,Z){return XW("main",W,Z)}function iJ(W,Z){return XW("nav",W,Z)}function VW(W,Z){return XW("div",W,Z)}function CQ(W,Z){return XW("p",W,Z)}function vZ(W,Z){return XW("a",W,Z)}function wQ(W){return XW("br",W,w)}function nJ(W,Z){return XW("small",W,Z)}function w6(W,Z){return XW("span",W,Z)}function lJ(W,Z){return XW("strong",W,Z)}function aJ(W){return XW("img",W,w)}function oJ(W,Z){return XW("button",W,Z)}class F6 extends z{constructor(W,Z,Q,J){super();this.index=W,this.removed=Z,this.changes=Q,this.children=J}}class eJ extends z{constructor(W,Z){super();this.kind=W,this.content=Z}}class W9 extends z{constructor(W,Z){super();this.kind=W,this.inner_html=Z}}class Z9 extends z{constructor(W,Z,Q){super();this.kind=W,this.added=Z,this.removed=Q}}class Q9 extends z{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.before=Q}}class J9 extends z{constructor(W,Z,Q){super();this.kind=W,this.index=Z,this.with=Q}}class K9 extends z{constructor(W,Z){super();this.kind=W,this.index=Z}}class X9 extends z{constructor(W,Z,Q){super();this.kind=W,this.children=Z,this.before=Q}}function EQ(W,Z,Q,J){return new F6(W,Z,Q,J)}var xQ=0;function G9(W){return new eJ(xQ,W)}var kQ=1;function Y9(W){return new W9(kQ,W)}var yQ=2;function bQ(W,Z){return new Z9(yQ,W,Z)}var gQ=3;function V9(W,Z){return new Q9(gQ,W,Z)}var fQ=4;function F9(W){return new K9(fQ,W)}var hQ=5;function zZ(W,Z){return new J9(hQ,W,Z)}var _Q=6;function vQ(W,Z){return new X9(_Q,W,Z)}class H9 extends z{constructor(W,Z,Q,J,K,X,G,Y){super();this.kind=W,this.open_shadow_root=Z,this.will_adopt_styles=Q,this.observed_attributes=J,this.observed_properties=K,this.requested_contexts=X,this.provided_contexts=G,this.vdom=Y}}class U9 extends z{constructor(W,Z){super();this.kind=W,this.patch=Z}}class q9 extends z{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.data=Q}}class R9 extends z{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.value=Q}}class E6 extends z{constructor(W,Z){super();this.kind=W,this.messages=Z}}class x6 extends z{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class k6 extends z{constructor(W,Z,Q){super();this.kind=W,this.name=Z,this.value=Q}}class y6 extends z{constructor(W,Z,Q,J){super();this.kind=W,this.path=Z,this.name=Q,this.event=J}}class $Q extends z{constructor(W,Z,Q){super();this.kind=W,this.key=Z,this.value=Q}}var v0=0;function z9(W,Z,Q,J,K,X,G){return new H9(v0,W,Z,Q,J,K,X,G)}var $0=1;function mQ(W){return new U9($0,W)}var m0=2;function I9(W,Z){return new q9(m0,W,Z)}var u0=3;function N9(W,Z){return new R9(u0,W,Z)}class b6 extends z{constructor(W,Z){super();this.patch=W,this.events=Z}}class T9 extends z{constructor(W,Z,Q){super();this.added=W,this.removed=Z,this.events=Q}}function c0(W,Z,Q,J){if(Q==="input"&&Z==="")return L6(W,J);else if(Q==="select"&&Z==="")return L6(W,J);else if(Q==="textarea"&&Z==="")return L6(W,J);else return!1}function O9(W,Z,Q,J,K,X,G,Y){while(!0){let V=W,M=Z,H=Q,R=J,N=K,j=X,A=G,C=Y;if(N instanceof I)if(j instanceof I)return new T9(A,C,R);else{let D=j.head;if(D instanceof zW){let E=D,O=j.tail,P=D.name,x=D.handler,q=U(E,A),B=fZ(R,H,M,P,x);W=V,Z=M,Q=H,J=B,K=N,X=O,G=q,Y=C}else{let E=D,O=j.tail,P=U(E,A);W=V,Z=M,Q=H,J=R,K=N,X=O,G=P,Y=C}}else if(j instanceof I){let D=N.head;if(D instanceof zW){let E=D,O=N.tail,P=D.name,x=U(E,C),q=P6(R,M,P);W=V,Z=M,Q=H,J=q,K=O,X=j,G=A,Y=x}else{let E=D,O=N.tail,P=U(E,C);W=V,Z=M,Q=H,J=R,K=O,X=j,G=A,Y=P}}else{let{head:D,tail:E}=N,O=j.head,P=j.tail,x=j6(D,O);if(x instanceof t)if(D instanceof zW){let q=D.name,B=U(D,C),L=P6(R,M,q);W=V,Z=M,Q=H,J=L,K=E,X=j,G=A,Y=B}else{let q=U(D,C);W=V,Z=M,Q=H,J=R,K=E,X=j,G=A,Y=q}else if(x instanceof e)if(D instanceof _W)if(O instanceof _W){let q,B=O.name;if(B==="value")q=V||D.value!==O.value;else if(B==="checked")q=V||D.value!==O.value;else if(B==="selected")q=V||D.value!==O.value;else q=D.value!==O.value;let L=q,k;if(L)k=U(O,A);else k=A;let b=k;W=V,Z=M,Q=H,J=R,K=E,X=P,G=b,Y=C}else if(O instanceof zW){let{name:q,handler:B}=O,L=U(O,A),k=U(D,C),b=fZ(R,H,M,q,B);W=V,Z=M,Q=H,J=b,K=E,X=P,G=L,Y=k}else{let q=U(O,A),B=U(D,C);W=V,Z=M,Q=H,J=R,K=E,X=P,G=q,Y=B}else if(D instanceof S6)if(O instanceof S6){let q,B=O.name;if(B==="scrollLeft")q=!0;else if(B==="scrollRight")q=!0;else if(B==="value")q=V||!qZ(D.value,O.value);else if(B==="checked")q=V||!qZ(D.value,O.value);else if(B==="selected")q=V||!qZ(D.value,O.value);else q=!qZ(D.value,O.value);let L=q,k;if(L)k=U(O,A);else k=A;let b=k;W=V,Z=M,Q=H,J=R,K=E,X=P,G=b,Y=C}else if(O instanceof zW){let{name:q,handler:B}=O,L=U(O,A),k=U(D,C),b=fZ(R,H,M,q,B);W=V,Z=M,Q=H,J=b,K=E,X=P,G=L,Y=k}else{let q=U(O,A),B=U(D,C);W=V,Z=M,Q=H,J=R,K=E,X=P,G=q,Y=B}else if(O instanceof zW){let{name:q,handler:B}=O,L=D.prevent_default.kind!==O.prevent_default.kind||D.stop_propagation.kind!==O.stop_propagation.kind||D.immediate!==O.immediate||D.debounce!==O.debounce||D.throttle!==O.throttle,k;if(L)k=U(O,A);else k=A;let b=k,f=fZ(R,H,M,q,B);W=V,Z=M,Q=H,J=f,K=E,X=P,G=b,Y=C}else{let q=D.name,B=U(O,A),L=U(D,C),k=P6(R,M,q);W=V,Z=M,Q=H,J=k,K=E,X=P,G=B,Y=L}else if(O instanceof zW){let{name:q,handler:B}=O,L=U(O,A),k=fZ(R,H,M,q,B);W=V,Z=M,Q=H,J=k,K=N,X=P,G=L,Y=C}else{let q=U(O,A);W=V,Z=M,Q=H,J=R,K=N,X=P,G=q,Y=C}}}}function uQ(W,Z,Q,J,K,X,G,Y,V,M,H,R,N,j){while(!0){let A=W,C=Z,D=Q,E=J,O=K,P=X,x=G,q=Y,B=V,L=M,k=H,b=R,f=N,a=j;if(A instanceof I)if(D instanceof I)return new b6(new F6(B,x,k,b),a);else{let PW=mJ(a,f,L,q,D),OW=vQ(D,q-P),c=U(OW,k);return new b6(new F6(B,x,c,b),PW)}else if(D instanceof I){let{head:PW,tail:OW}=A,c;if(PW.key===""||!X6(O,PW.key))c=x+1;else c=x;let h=c,$=sW(a,L,q,PW);W=OW,Z=C,Q=D,J=E,K=O,X=P,G=h,Y=q,V=B,M=L,H=k,R=b,N=f,j=$}else{let PW=A.head,OW=D.head;if(PW.key!==OW.key){let c=A.tail,d=D.tail,h=K6(C,OW.key);if(X6(E,PW.key))if(h instanceof T){let y=h[0];if(X6(O,PW.key))W=c,Z=C,Q=D,J=E,K=O,X=P-1,G=x,Y=q,V=B,M=L,H=k,R=b,N=f,j=a;else{let m=q-P,g=U(V9(OW.key,m),k),s=MZ(O,OW.key,void 0),u=P+1;W=U(y,A),Z=C,Q=D,J=E,K=s,X=u,G=x,Y=q,V=B,M=L,H=g,R=b,N=f,j=a}}else{let y=q-P,_=rW(a,f,L,q,OW),m=vQ(F([OW]),y),g=U(m,k);W=A,Z=C,Q=d,J=E,K=O,X=P+1,G=x,Y=q+1,V=B,M=L,H=g,R=b,N=f,j=_}else if(h instanceof T){let y=q-P,_=U(F9(y),k),m=sW(a,L,q,PW),g=P-1;W=c,Z=C,Q=D,J=E,K=O,X=g,G=x,Y=q,V=B,M=L,H=_,R=b,N=f,j=m}else{let y=zZ(q-P,OW),_,g=sW(a,L,q,PW);_=rW(g,f,L,q,OW);let s=_;W=c,Z=C,Q=d,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(y,k),R=b,N=f,j=s}}else{let c=A.head;if(c instanceof CW){let d=D.head;if(d instanceof CW){let h=c,$=A.tail,y=d,_=D.tail,m=QZ(f,y.mapper),g=LW(L,q,y.key),s=uQ(h.children,h.keyed_children,y.children,y.keyed_children,IW(),0,0,0,q,g,w,w,m,a),u,l=s.patch;if(l.changes instanceof I)if(l.children instanceof I)if(l.removed===0)u=b;else u=U(s.patch,b);else u=U(s.patch,b);else u=U(s.patch,b);let kW=u;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=k,R=kW,N=f,j=s.events}else{let h=c,$=A.tail,y=d,_=D.tail,m=zZ(q-P,y),g,u=sW(a,L,q,h);g=rW(u,f,L,q,y);let l=g;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(m,k),R=b,N=f,j=l}}else if(c instanceof wW){let d=D.head;if(d instanceof wW){let h=c,$=d;if(h.namespace===$.namespace&&h.tag===$.tag){let y=A.tail,_=D.tail,m=QZ(f,$.mapper),g=LW(L,q,$.key),s=c0(a,$.namespace,$.tag,g),u=O9(s,g,m,a,h.attributes,$.attributes,w,w),l,vW,kW;l=u.added,vW=u.removed,kW=u.events;let KZ;if(l instanceof I&&vW instanceof I)KZ=w;else KZ=F([bQ(l,vW)]);let TZ=KZ,AZ=uQ(h.children,h.keyed_children,$.children,$.keyed_children,IW(),0,0,0,q,g,TZ,w,m,kW),lW,XZ=AZ.patch;if(XZ.changes instanceof I)if(XZ.children instanceof I)if(XZ.removed===0)lW=b;else lW=U(AZ.patch,b);else lW=U(AZ.patch,b);else lW=U(AZ.patch,b);let KK=lW;W=y,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=k,R=KK,N=f,j=AZ.events}else{let y=c,_=A.tail,m=d,g=D.tail,s=zZ(q-P,m),u,vW=sW(a,L,q,y);u=rW(vW,f,L,q,m);let kW=u;W=_,Z=C,Q=g,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(s,k),R=b,N=f,j=kW}}else{let h=c,$=A.tail,y=d,_=D.tail,m=zZ(q-P,y),g,u=sW(a,L,q,h);g=rW(u,f,L,q,y);let l=g;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(m,k),R=b,N=f,j=l}}else if(c instanceof EW){let d=D.head;if(d instanceof EW){let h=c,$=d;if(h.content===$.content){let y=A.tail,_=D.tail;W=y,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=k,R=b,N=f,j=a}else{let y=A.tail,_=d,m=D.tail,g=EQ(q,0,F([G9(_.content)]),w);W=y,Z=C,Q=m,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=k,R=U(g,b),N=f,j=a}}else{let h=c,$=A.tail,y=d,_=D.tail,m=zZ(q-P,y),g,u=sW(a,L,q,h);g=rW(u,f,L,q,y);let l=g;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(m,k),R=b,N=f,j=l}}else{let d=D.head;if(d instanceof yZ){let h=c,$=A.tail,y=d,_=D.tail,m=QZ(f,y.mapper),g=LW(L,q,y.key),s=O9(!1,g,m,a,h.attributes,y.attributes,w,w),u,l,vW;u=s.added,l=s.removed,vW=s.events;let kW;if(u instanceof I&&l instanceof I)kW=w;else kW=F([bQ(u,l)]);let KZ=kW,TZ;if(h.inner_html===y.inner_html)TZ=KZ;else TZ=U(Y9(y.inner_html),KZ);let lW=TZ,XZ;if(lW instanceof I)XZ=b;else XZ=U(EQ(q,0,lW,F([])),b);let G8=XZ;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=k,R=G8,N=f,j=vW}else{let h=c,$=A.tail,y=d,_=D.tail,m=zZ(q-P,y),g,u=sW(a,L,q,h);g=rW(u,f,L,q,y);let l=g;W=$,Z=C,Q=_,J=E,K=O,X=P,G=x,Y=q+1,V=B,M=L,H=U(m,k),R=b,N=f,j=l}}}}}}function $Z(W,Z,Q){return uQ(F([Z]),IW(),F([Q]),IW(),IW(),0,0,0,0,B6,w,w,i,gJ(W))}var{setTimeout:p0,clearTimeout:cQ}=globalThis,d0=(W,Z)=>BW().createElementNS(W,Z),s0=(W)=>BW().createTextNode(W),r0=()=>BW().createDocumentFragment(),mZ=(W,Z,Q)=>W.insertBefore(Z,Q),j9=XJ?(W,Z,Q)=>W.moveBefore(Z,Q):mZ,i0=(W,Z)=>W.removeChild(Z),n0=(W,Z)=>W.getAttribute(Z),S9=(W,Z,Q)=>W.setAttribute(Z,Q),l0=(W,Z)=>W.removeAttribute(Z),a0=(W,Z,Q,J)=>W.addEventListener(Z,Q,J),B9=(W,Z,Q)=>W.removeEventListener(Z,Q),o0=(W,Z)=>W.innerHTML=Z,t0=(W,Z)=>W.data=Z,iW=Symbol("lustre");class C9{constructor(W,Z,Q,J){this.kind=W,this.key=J,this.parent=Z,this.children=[],this.node=Q,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===xW?this.node.parentNode:this.node}}var nW=(W,Z,Q,J,K)=>{let X=new C9(W,Z,Q,K);return Q[iW]=X,Z?.children.splice(J,0,X),X},e0=(W)=>{let Z="";for(let Q=W[iW];Q.parent;Q=Q.parent)if(Q.key)Z=`${Y6}${Q.key}${Z}`;else{let J=Q.parent.children.indexOf(Q);Z=`${Y6}${J}${Z}`}return Z.slice(1)};class dQ{#W=null;#K=()=>{};#J=!1;#Q=!1;constructor(W,Z,{useServerEvents:Q=!1,exposeKeys:J=!1}={}){this.#W=W,this.#K=Z,this.#J=Q,this.#Q=J}mount(W){nW(HZ,null,this.#W,0,null),this.#D(this.#W,null,this.#W[iW],0,W)}push(W){this.#Z.push({node:this.#W[iW],patch:W}),this.#X()}#Z=[];#X(){let W=this.#Z;while(W.length){let{node:Z,patch:Q}=W.pop(),{children:J}=Z,{changes:K,removed:X,children:G}=Q;if(IZ(K,(Y)=>this.#Y(Z,Y)),X)this.#R(Z,J.length-X,X);IZ(G,(Y)=>{let V=J[Y.index|0];this.#Z.push({node:V,patch:Y})})}}#Y(W,Z){switch(Z.kind){case xQ:this.#S(W,Z);break;case kQ:this.#O(W,Z);break;case yQ:this.#z(W,Z);break;case gQ:this.#M(W,Z);break;case fQ:this.#U(W,Z);break;case hQ:this.#H(W,Z);break;case _Q:this.#V(W,Z);break}}#V(W,{children:Z,before:Q}){let J=r0(),K=this.#F(W,Q);this.#N(J,null,W,Q|0,Z),mZ(W.parentNode,J,K)}#H(W,{index:Z,with:Q}){this.#R(W,Z|0,1);let J=this.#F(W,Z);this.#D(W.parentNode,J,W,Z|0,Q)}#F(W,Z){Z=Z|0;let{children:Q}=W,J=Q.length;if(Z<J)return Q[Z].node;let K=Q[J-1];if(!K&&W.kind!==xW)return null;if(!K)K=W;while(K.kind===xW&&K.children.length)K=K.children[K.children.length-1];return K.node.nextSibling}#M(W,{key:Z,before:Q}){Q=Q|0;let{children:J,parentNode:K}=W,X=J[Q].node,G=J[Q];for(let H=Q+1;H<J.length;++H){let R=J[H];if(J[H]=G,G=R,R.key===Z){J[Q]=R;break}}let{kind:Y,node:V,children:M}=G;if(j9(K,V,X),Y===xW)this.#G(K,M,X)}#G(W,Z,Q){for(let J=0;J<Z.length;++J){let{kind:K,node:X,children:G}=Z[J];if(j9(W,X,Q),K===xW)this.#G(W,G,Q)}}#U(W,{index:Z}){this.#R(W,Z,1)}#R(W,Z,Q){let{children:J,parentNode:K}=W,X=J.splice(Z,Q);for(let G=0;G<X.length;++G){let{kind:Y,node:V,children:M}=X[G];if(i0(K,V),this.#q(X[G]),Y===xW)X.push(...M)}}#q(W){let{debouncers:Z,children:Q}=W;for(let{timeout:J}of Z.values())if(J)cQ(J);Z.clear(),IZ(Q,(J)=>this.#q(J))}#z({node:W,handlers:Z,throttles:Q,debouncers:J},{added:K,removed:X}){IZ(X,({name:G})=>{if(Z.delete(G))B9(W,G,pQ),this.#I(Q,G,0),this.#I(J,G,0);else l0(W,G),L9[G]?.removed?.(W,G)}),IZ(K,(G)=>this.#j(W,G))}#S({node:W},{content:Z}){t0(W,Z??"")}#O({node:W},{inner_html:Z}){o0(W,Z??"")}#N(W,Z,Q,J,K){IZ(K,(X)=>this.#D(W,Z,Q,J++,X))}#D(W,Z,Q,J,K){switch(K.kind){case HZ:{let X=this.#T(Q,J,K);this.#N(X,null,X[iW],0,K.children),mZ(W,X,Z);break}case gZ:{let X=this.#A(Q,J,K);mZ(W,X,Z);break}case xW:{let X=this.#A(Q,J,K);mZ(W,X,Z),this.#N(W,Z,X[iW],0,K.children);break}case xJ:{let X=this.#T(Q,J,K);this.#O({node:X},K),mZ(W,X,Z);break}}}#T(W,Z,{kind:Q,key:J,tag:K,namespace:X,attributes:G}){let Y=d0(X||O6,K);if(nW(Q,W,Y,Z,J),this.#Q&&J)S9(Y,"data-lustre-key",J);return IZ(G,(V)=>this.#j(Y,V)),Y}#A(W,Z,{kind:Q,key:J,content:K}){let X=s0(K??"");return nW(Q,W,X,Z,J),X}#j(W,Z){let{debouncers:Q,handlers:J,throttles:K}=W[iW],{kind:X,name:G,value:Y,prevent_default:V,debounce:M,throttle:H}=Z;switch(X){case MQ:{let R=Y??"";if(G==="virtual:defaultValue"){W.defaultValue=R;return}if(R!==n0(W,G))S9(W,G,R);L9[G]?.added?.(W,R);break}case RJ:W[G]=Y;break;case HQ:{if(J.has(G))B9(W,G,pQ);let R=V.kind===UQ;a0(W,G,pQ,{passive:R}),this.#I(K,G,H),this.#I(Q,G,M),J.set(G,(N)=>this.#B(Z,N));break}}}#I(W,Z,Q){let J=W.get(Z);if(Q>0)if(J)J.delay=Q;else W.set(Z,{delay:Q});else if(J){let{timeout:K}=J;if(K)cQ(K);W.delete(Z)}}#B(W,Z){let{currentTarget:Q,type:J}=Z,{debouncers:K,throttles:X}=Q[iW],G=e0(Q),{prevent_default:Y,stop_propagation:V,include:M,immediate:H}=W;if(Y.kind===RQ)Z.preventDefault();if(V.kind===RQ)Z.stopPropagation();if(J==="submit")Z.detail??={},Z.detail.formData=[...new FormData(Z.target,Z.submitter).entries()];let R=this.#J?WX(Z,M??[]):Z,N=X.get(J);if(N){let A=Date.now(),C=N.last||0;if(A>C+N.delay)N.last=A,N.lastEvent=Z,this.#K(R,G,J,H)}let j=K.get(J);if(j)cQ(j.timeout),j.timeout=p0(()=>{if(Z===X.get(J)?.lastEvent)return;this.#K(R,G,J,H)},j.delay);if(!N&&!j)this.#K(R,G,J,H)}}var IZ=(W,Z)=>{if(Array.isArray(W))for(let Q=0;Q<W.length;Q++)Z(W[Q]);else if(W)for(W;W.head;W=W.tail)Z(W.head)},pQ=(W)=>{let{currentTarget:Z,type:Q}=W;Z[iW].handlers.get(Q)(W)},WX=(W,Z=[])=>{let Q={};if(W.type==="input"||W.type==="change")Z.push("target.value");if(W.type==="submit")Z.push("detail.formData");for(let J of Z){let K=J.split(".");for(let X=0,G=W,Y=Q;X<K.length;X++){if(X===K.length-1){Y[K[X]]=G[K[X]];break}Y=Y[K[X]]??={},G=G[K[X]]}}return Q},P9=(W)=>{return{added(Z){Z[W]=!0},removed(Z){Z[W]=!1}}},ZX=(W)=>{return{added(Z,Q){Z[W]=Q}}},L9={checked:P9("checked"),selected:P9("selected"),value:ZX("value"),autofocus:{added(W){queueMicrotask(()=>{W.focus?.()})}},autoplay:{added(W){try{W.play?.()}catch(Z){console.error(Z)}}}};function QX(W,Z,Q){while(!0){let J=W,K=Z,X=Q;if(J instanceof I)return[K,p(X)];else{let G=J.tail,Y=J.head[0],V=J.head[1],M=EJ(Y,V),H;if(Y==="")H=K;else H=MZ(K,Y,M);let R=H,N=U(M,X);W=G,Z=R,Q=N}}}function sQ(W){return QX(W,IW(),w)}function w9(W,Z,Q){let J=sQ(Q),K,X;return K=J[0],X=J[1],bZ("",i,"",W,Z,X,K,!1,!1)}function E9(W,Z,Q,J){let K=sQ(J),X,G;return X=K[0],G=K[1],bZ("",i,W,Z,Q,G,X,!1,!1)}function x9(W){let Z=sQ(W),Q,J;return Q=Z[0],J=Z[1],jQ("",i,J,Q)}var k9=(W)=>{let Z=nW(HZ,null,W,0,null),Q=0;for(let G=W.firstChild;G;G=G.nextSibling)if(y9(G))Q+=1;if(Q===0){let G=BW().createTextNode("");return nW(gZ,Z,G,0,null),W.replaceChildren(G),uJ()}if(Q===1)return rQ(Z,W).head[1];let J=BW().createTextNode(""),K=nW(xW,Z,J,0,null),X=rQ(K,W);return W.insertBefore(J,W.firstChild),x9(X)},y9=(W)=>{switch(W.nodeType){case T6:return!0;case YQ:return!!W.data;default:return!1}},JX=(W,Z,Q,J)=>{if(!y9(Z))return null;switch(Z.nodeType){case T6:{let K=nW(HZ,W,Z,J,Q),X=Z.localName,G=Z.namespaceURI,Y=!G||G===O6;if(Y&&KX.includes(X))XX(X,Z);let V=GX(Z),M=rQ(K,Z);return Y?w9(X,V,M):E9(G,X,V,M)}case YQ:return nW(gZ,W,Z,J,null),_Z(Z.data);default:return null}},KX=["input","select","textarea"],XX=(W,Z)=>{let{value:Q,checked:J}=Z;if(W==="input"&&Z.type==="checkbox"&&!J)return;if(W==="input"&&Z.type==="radio"&&!J)return;if(Z.type!=="checkbox"&&Z.type!=="radio"&&!Q)return;queueMicrotask(()=>{if(Z.value=Q,Z.checked=J,Z.dispatchEvent(new Event("input",{bubbles:!0})),Z.dispatchEvent(new Event("change",{bubbles:!0})),BW().activeElement!==Z)Z.dispatchEvent(new Event("blur",{bubbles:!0}))})},rQ=(W,Z)=>{let Q=null,J=Z.firstChild,K=null,X=0;while(J){let G=J.nodeType===T6?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let Y=JX(W,J,G,X),V=J.nextSibling;if(Y){let M=new TW([G??"",Y],null);if(K)K=K.tail=M;else K=Q=M;X+=1}else Z.removeChild(J);J=V}if(!K)return w;return K.tail=w,Q},GX=(W)=>{let Z=W.attributes.length,Q=w;while(Z-- >0){let J=W.attributes[Z];if(J.name==="xmlns")continue;Q=new TW(YX(J),Q)}return Q},YX=(W)=>{let{localName:Z,value:Q}=W;return ZW(Z,Q)};var M6=()=>!!BW();class g6{constructor(W,[Z,Q],J,K){this.root=W,this.#W=Z,this.#K=J,this.#J=K,this.root.addEventListener("context-request",(X)=>{if(!(X.context&&X.callback))return;if(!this.#Y.has(X.context))return;X.stopImmediatePropagation();let G=this.#Y.get(X.context);if(X.subscribe){let Y=()=>{G.subscribers=G.subscribers.filter((V)=>V!==X.callback)};G.subscribers.push([X.callback,Y]),X.callback(G.value,Y)}else X.callback(G.value)}),this.#X=new dQ(this.root,(X,G,Y)=>{let[V,M]=V6(this.#Z,G,Y,X);if(this.#Z=V,M.isOk()){let H=M[0];if(H.stop_propagation)X.stopPropagation();if(H.prevent_default)X.preventDefault();this.dispatch(H.message,!1)}}),this.#Q=k9(this.root),this.#Z=LQ(),this.#U=!0,this.#q(Q)}root=null;dispatch(W,Z=!1){if(this.#U||=Z,this.#V)this.#H.push(W);else{let[Q,J]=this.#J(this.#W,W);this.#W=Q,this.#q(J)}}emit(W,Z){(this.root.host??this.root).dispatchEvent(new CustomEvent(W,{detail:Z,bubbles:!0,composed:!0}))}provide(W,Z){if(!this.#Y.has(W))this.#Y.set(W,{value:Z,subscribers:[]});else{let Q=this.#Y.get(W);Q.value=Z;for(let J=Q.subscribers.length-1;J>=0;J--){let[K,X]=Q.subscribers[J];if(!K){Q.subscribers.splice(J,1);continue}K(Z,X)}}}#W;#K;#J;#Q;#Z;#X;#Y=new Map;#V=!1;#H=[];#F=w;#M=w;#G=null;#U=!1;#R={dispatch:(W,Z)=>this.dispatch(W,Z),emit:(W,Z)=>this.emit(W,Z),select:()=>{},root:()=>this.root,provide:(W,Z)=>this.provide(W,Z)};#q(W){this.#V=!0;while(!0){for(let Z=W.synchronous;Z.tail;Z=Z.tail)Z.head(this.#R);if(this.#F=g9(this.#F,W.before_paint),this.#M=g9(this.#M,W.after_paint),!this.#H.length)break;[this.#W,W]=this.#J(this.#W,this.#H.shift())}if(this.#V=!1,this.#U)cancelAnimationFrame(this.#G),this.#z();else if(!this.#G)this.#G=requestAnimationFrame(()=>{this.#z()})}#z(){this.#U=!1,this.#G=null;let W=this.#K(this.#W),{patch:Z,events:Q}=$Z(this.#Z,this.#Q,W);if(this.#Z=Q,this.#Q=W,this.#X.push(Z),this.#F instanceof TW){let J=b9(this.#F);this.#F=w,queueMicrotask(()=>{this.#U=!0,this.#q(J)})}if(this.#M instanceof TW){let J=b9(this.#M);this.#M=w,requestAnimationFrame(()=>{this.#U=!0,this.#q(J)})}}}function b9(W){return{synchronous:W,after_paint:w,before_paint:w}}function g9(W,Z){if(W instanceof I)return Z;else if(Z instanceof I)return W;else return aZ(W,Z)}class nQ extends z{constructor(W){super();this.message=W}}class lQ extends z{constructor(W){super();this.callback=W}}class aQ extends z{constructor(W){super();this.callback=W}}class JZ extends z{constructor(W){super();this.message=W}}class NZ extends z{constructor(W,Z){super();this.name=W,this.data=Z}}class f6 extends z{constructor(W,Z){super();this.key=W,this.value=Z}}class DZ extends z{}class h9 extends z{constructor(W,Z,Q,J,K,X,G,Y,V,M){super();this.open_shadow_root=W,this.adopt_styles=Z,this.delegates_focus=Q,this.attributes=J,this.properties=K,this.contexts=X,this.is_form_associated=G,this.on_form_autofill=Y,this.on_form_reset=V,this.on_form_restore=M}}function _9(W){let Z=new h9(!0,!0,!1,w,w,w,!1,A6,A6,A6);return qW(W,Z,(Q,J)=>{return J.apply(Q)})}class $9{#W;constructor(W,[Z,Q],J,K){this.#W=new g6(W,[Z,Q],K,J)}send(W){switch(W.constructor){case JZ:{this.dispatch(W.message,!1);break}case NZ:{this.emit(W.name,W.data);break}case DZ:break}}dispatch(W,Z){this.#W.dispatch(W,Z)}emit(W,Z){this.#W.emit(W,Z)}}var m9=({init:W,update:Z,view:Q},J,K)=>{if(!M6())return new S(new H6);let X=J instanceof HTMLElement?J:BW().querySelector(J);if(!X)return new S(new oQ(J));return new T(new $9(X,W(K),Z,Q))};class VX{#W;#K;#J;#Q;#Z;#X;#Y=SZ();#V=new Set;constructor([W,Z],Q,J,K){this.#W=W,this.#K=Q,this.#J=J,this.#Q=K,this.#Z=this.#J(this.#W),this.#X=$J(this.#Z),this.#G(Z)}send(W){switch(W.constructor){case nQ:{let{message:Z}=W,Q=this.#H(Z),J=$Z(this.#X,this.#Z,Q);this.#Z=Q,this.#X=J.events,this.broadcast(mQ(J.patch));return}case lQ:{let{callback:Z}=W;this.#V.add(Z),Z(z9(this.#Q.open_shadow_root,this.#Q.adopt_styles,nZ(this.#Q.attributes),nZ(this.#Q.properties),nZ(this.#Q.contexts),this.#Y,this.#Z));return}case aQ:{let{callback:Z}=W;this.#V.delete(Z);return}case JZ:{let{message:Z}=W,[Q,J]=this.#K(this.#W,Z),K=this.#J(Q),X=$Z(this.#X,this.#Z,K);this.#G(J),this.#W=Q,this.#Z=K,this.#X=X.events,this.broadcast(mQ(X.patch));return}case NZ:{let{name:Z,data:Q}=W;this.broadcast(I9(Z,Q));return}case f6:{let{key:Z,value:Q}=W;this.#Y=iZ(this.#Y,Z,Q),this.broadcast(N9(Z,Q));return}case DZ:{this.#W=null,this.#K=null,this.#J=null,this.#Q=null,this.#Z=null,this.#X=null,this.#Y=null,this.#V.clear();return}default:return}}broadcast(W){for(let Z of this.#V)Z(W)}#H(W){switch(W.constructor){case E6:{let{messages:Z}=W,Q=this.#W,J=Q6();for(let K=Z;K.head;K=K.tail){let X=this.#H(K.head);if(X instanceof T){Q=X[0][0],J=BJ(QW.fromArray([J,X[0][1]]));break}}return this.#G(J),this.#W=Q,this.#J(this.#W)}case x6:{let{name:Z,value:Q}=W,J=this.#F(Z,Q);if(J instanceof S)return this.#Z;else{let[K,X]=this.#K(this.#W,J[0]);return this.#G(X),this.#W=K,this.#J(this.#W)}}case k6:{let{name:Z,value:Q}=W,J=this.#M(Z,Q);if(J instanceof S)return this.#Z;else{let[K,X]=this.#K(this.#W,J[0]);return this.#G(X),this.#W=K,this.#J(this.#W)}}case y6:{let{path:Z,name:Q,event:J}=W,[K,X]=V6(this.#X,Z,Q,J);if(this.#X=K,X instanceof S)return this.#Z;else{let[G,Y]=this.#K(this.#W,X[0].message);return this.#G(Y),this.#W=G,this.#J(this.#W)}}case $Q:{let{key:Z,value:Q}=W,J=tW(this.#Q.contexts,Z);if(J instanceof S)return this.#Z;if(J=cW(Q,J[0]),J instanceof S)return this.#Z;let[K,X]=this.#K(this.#W,J[0]);return this.#G(X),this.#W=K,this.#J(this.#W)}}}#F(W,Z){let Q=tW(this.#Q.attributes,W);switch(Q.constructor){case T:return Q[0](Z);case S:return new S(void 0)}}#M(W,Z){let Q=tW(this.#Q.properties,W);switch(Q.constructor){case T:return Q[0](Z);case S:return new S(void 0)}}#G(W){let Z=(G)=>this.send(new JZ(G)),Q=(G,Y)=>this.send(new NZ(G,Y)),J=()=>{return},K=()=>{return},X=(G,Y)=>this.send(new f6(G,Y));globalThis.queueMicrotask(()=>{jJ(W,Z,Q,J,K,X)})}}class u9 extends z{constructor(W,Z,Q,J){super();this.init=W,this.update=Z,this.view=Q,this.config=J}}class oQ extends z{constructor(W){super();this.selector=W}}class H6 extends z{}function FX(W,Z,Q){return new u9(W,Z,Q,_9(w))}function c9(W,Z,Q){return FX((X)=>{return[W(X),Q6()]},(X,G)=>{return[Z(X,G),Q6()]},Q)}function p9(W,Z,Q){return QJ(!M6(),new S(new H6),()=>{return m9(W,Z,Q)})}function eQ(W){let Z=document.querySelector(W);if(!Z)return new S;return new T(Z)}function W8(W){return W.innerText}class Z8 extends z{constructor(W,Z,Q,J,K,X,G,Y,V,M){super();this.name=W,this.city=Z,this.country=Q,this.languages=J,this.date=K,this.webpage=X,this.facebook=G,this.year_month=Y,this.continent=V,this.image=M}}class Q8 extends z{constructor(W,Z){super();this.id=W,this.label=Z}}class J8 extends z{constructor(W){super();this.tab_id=W}}class OZ extends z{constructor(W,Z,Q){super();this.active_tab=W,this.festivals=Z,this.continents=Q}}function i9(){return WW("id",YW,(W)=>{return WW("label",YW,(Z)=>{return VZ(new Q8(W,Z))})})}function zX(){return WW("name",YW,(W)=>{return WW("city",YW,(Z)=>{return WW("country",YW,(Q)=>{return WW("languages",YW,(J)=>{return WW("date",YW,(K)=>{return WW("webpage",YW,(X)=>{return WW("facebook",YW,(G)=>{return WW("year_month",YW,(Y)=>{return WW("continent",i9(),(V)=>{return WW("image",YW,(M)=>{return VZ(new Z8(W,Z,Q,J,K,X,G,Y,V,M))})})})})})})})})})})}function n9(){return WW("active_tab",YW,(W)=>{return WW("festivals",tZ(zX()),(Z)=>{return WW("continents",tZ(i9()),(Q)=>{return VZ(new OZ(W,Z,Q))})})})}function NX(W){if(W==="input")return!0;else if(W==="change")return!0;else if(W==="focus")return!0;else if(W==="focusin")return!0;else if(W==="focusout")return!0;else if(W==="blur")return!0;else if(W==="select")return!0;else return!1}function DX(W,Z){return zJ(W,oZ(Z,(Q)=>{return new Z6(!1,!1,Q)}),w,qQ,qQ,NX(W),0,0)}function a9(W){return DX("click",VZ(W))}var o9="http://www.w3.org/2000/svg";function t9(W,Z){return C6(o9,"svg",W,Z)}function e9(W){return C6(o9,"path",W,w)}var AX="src/icons.gleam";class uZ extends z{constructor(W,Z){super();this.path=W,this.viewbox=Z}}function jX(){return F([["calendar",new uZ("M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Z","0 0 256 256")],["pin",new uZ("M128,64a40,40,0,1,0,40,40A40,40,0,0,0,128,64Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,128Zm0-112a88.1,88.1,0,0,0-88,88c0,31.4,14.51,64.68,42,96.25a254.19,254.19,0,0,0,41.45,38.3,8,8,0,0,0,9.18,0A254.19,254.19,0,0,0,174,200.25c27.45-31.57,42-64.85,42-96.25A88.1,88.1,0,0,0,128,16Zm0,206c-16.53-13-72-60.75-72-118a72,72,0,0,1,144,0C200,161.23,144.53,209,128,222Z","0 0 256 256")],["translate",new uZ("M247.15,212.42l-56-112a8,8,0,0,0-14.31,0l-21.71,43.43A88,88,0,0,1,108,126.93,103.65,103.65,0,0,0,135.69,64H160a8,8,0,0,0,0-16H104V32a8,8,0,0,0-16,0V48H32a8,8,0,0,0,0,16h87.63A87.76,87.76,0,0,1,96,116.35a87.74,87.74,0,0,1-19-31,8,8,0,1,0-15.08,5.34A103.63,103.63,0,0,0,84,127a87.55,87.55,0,0,1-52,17,8,8,0,0,0,0,16,103.46,103.46,0,0,0,64-22.08,104.18,104.18,0,0,0,51.44,21.31l-26.6,53.19a8,8,0,0,0,14.31,7.16L148.94,192h70.11l13.79,27.58A8,8,0,0,0,240,224a8,8,0,0,0,7.15-11.58ZM156.94,176,184,121.89,211.05,176Z","0 0 256 256")],["facebook-logo",new uZ("M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z","0 0 256 256")],["globe",new uZ("M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z","0 0 256 256")]])}function SX(W,Z){let Q=_6(Z,16),J=S8(jX(),W),K;if(J instanceof T)K=J[0];else throw aW("let_assert",AX,"icons",21,"create_icon","Pattern match failed, no pattern matched the value.",{value:J,start:496,end:551,pattern_start:507,pattern_end:515});return t9(F([DJ(Q),OJ(Q),ZW("viewBox",K.viewbox),ZW("fill","currentColor"),v("flex-shrink-0")]),F([e9(F([ZW("d",K.path)]))]))}function cZ(W){return SX(W,new FW)}function WK(W){return a8((()=>{let Q=QQ(W,"-");return T8(Q)})(),"")}function PX(W){let Z=VW(F([v("flex align-items-center mb-2 info-row")]),F([cZ("facebook-logo"),vZ(F([v("ml-2"),xZ(W.facebook),kZ("_blank"),EZ(W.name+" facebook page")]),F([n("Facebook page")]))])),Q=VW(F([]),F([])),J=LZ(W.facebook,"facebook.com"),K=LZ(W.facebook,"fb.com");if(!J&&!K)return Q;else return Z}function LX(W){return VW(F([v("grid-item")]),F([VW(F([v("p-4 card")]),F([VW(F([v("flex align-items-center justify-content-between mb-4 gap-3 date-img")]),F([VW(F([v("flex align-items-center gap-2 date flex-grow-1 flex-shrink-0")]),F([cZ("calendar"),w6(F([]),F([n(W.date),n((()=>{if(r8(WK(W.year_month)))return"";else return", "+WK(W.year_month)})())]))])),aJ(F([v("festival-image flex-shrink-1"),NJ(W.image)]))])),sJ(F([v("mt-1 mb-3")]),F([n(W.name)])),VW(F([v("flex align-items-center mb-2 info-row")]),F([cZ("translate"),w6(F([v("ml-2")]),F([n(W.languages)]))])),PX(W),VW(F([v("flex align-items-center mb-4 info-row")]),F([cZ("globe"),vZ(F([v("ml-2"),xZ(W.webpage),kZ("_blank"),EZ(W.name+" website")]),F([n(W.webpage)]))])),VW(F([v("flex align-items-center justify-content-end")]),F([VW(F([v("flex align-items-center px-3 py-2 pill location")]),F([cZ("pin"),w6(F([v("ml-1")]),F([n(W.city+", "+W.country)]))]))]))]))]))}function CX(W,Z){let Q=A8(Z,(K)=>{return K.continent.id===W.id});if(O8(Q))return F([CQ(F([v("text-center")]),F([n("No festivals found in this location or category.")]))]);else return F([VW(F([v("gap-3 gap-lg-4 px-2 px-lg-4 grid m-auto")]),SW(Q,LX))])}function wX(W,Z){let Q;if(Z.active_tab===W.id)Q="active";else Q="";return VW(F([v("tab-content "+Q),IJ(W.id+"-content"),zQ("content-continent",W.id)]),CX(W,Z.festivals))}function EX(){return pJ(F([v("text-center mb-4 mb-lg-5 pt-3 px-2")]),F([dJ(F([]),F([n("Improv Festivals Worldwide")])),CQ(F([]),F([lJ(F([]),F([n("Improvisers are awesome.")])),wQ(F([])),n("They maintain a "),vZ(F([xZ("https://docs.google.com/spreadsheets/d/1uIyvbpZsPtWmJZJwSlAEG22A8qcozKmK9WuxRYSIOSY/edit"),kZ("_blank"),EZ("Improv Festivals Worlwide Google Sheet")]),F([n("shareable spreadsheet")])),n(" of most improv festivals in the world."),wQ(F([])),n("This "),vZ(F([xZ("https://github.com/MissFahrenheit/improv-festivals-gleam"),kZ("_blank"),EZ("Improv Festivals Worldwide Project Github page")]),F([n("open-source project")])),n(" ✨magically✨ turns that spreadsheet into a website (refreshes hourly).")]))]))}function xX(){return cJ(F([v("text-center pb-1")]),F([nJ(F([]),F([n("This is an open-source project. Find it on "),vZ(F([xZ("https://github.com/MissFahrenheit/improv-festivals-gleam"),kZ("_blank"),EZ("Improv Festivals Worldwide Project Github page")]),F([n("GitHub")])),n(", fork it, go wild.")]))]))}function ZK(W,Z){let J=QQ(W,Z),K=SW(J,JQ);return I6(K,Z)}function kX(W,Z){let Q;if(Z.active_tab===W.id)Q="active";else Q="";return oJ(F([v("py-2 px-3 pill tab "+Q),TJ("button"),zQ("continent",W.id),a9(new J8(W.id))]),F([n((()=>{if(LZ(W.label,"/"))return ZK(W.label,"/");else if(LZ(W.label," "))return ZK(W.label," ");else return JQ(W.label)})())]))}function yX(W){return VW(F([v("flex align-items-center justify-content-center px-2 px-lg-4 mb-4")]),F([iJ(F([v("flex flex-wrap justify-content-center align-items-center py-2 gap-2 px-lg-3")]),SW(W.continents,(Z)=>{return kX(Z,W)}))]))}function QK(W){return VW(F([]),F([EX(),rJ(F([]),F([yX(W),VW(F([v("pt-3 pt-lg-4 pb-5")]),SW(W.continents,(Z)=>{return wX(Z,W)}))])),xX()]))}var X8="src/front.gleam";function gX(W){return new OZ("europe",W[0],W[1])}function fX(W,Z){return new OZ(Z,W.festivals,W.continents)}function hX(W,Z){let Q=Z.tab_id;return fX(W,Q)}function JK(){let W,Z=eQ("#model");W=KQ(Z,W8);let Q=W,J;if(Q instanceof T)J=Q[0];else throw aW("let_assert",X8,"front",11,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:252,end:356,pattern_start:263,pattern_end:271});let K=e8(J,n9()),X;if(K instanceof T)X=K[0];else throw aW("let_assert",X8,"front",15,"main","Pattern match failed, no pattern matched the value.",{value:K,start:360,end:432,pattern_start:371,pattern_end:380});let G=c9(gX,hX,QK),Y=p9(G,"#app",[X.festivals,X.continents]);if(!(Y instanceof T))throw aW("let_assert",X8,"front",18,"main","Pattern match failed, no pattern matched the value.",{value:Y,start:497,end:583,pattern_start:508,pattern_end:513});return Y}JK();
